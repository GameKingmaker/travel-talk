{% extends "base.html" %}

{# ✅ SEO (목록은 노출 OK) #}
{% set page_title = "상황 대화 퀴즈 | 일본 여행 회화 공부방" %}
{% set page_desc = "그림과 대화를 보고 상황에 알맞은 문장을 고르는 일본어 대화 퀴즈입니다." %}
{% set page_robots = "index,follow" %}

{% block content %}

<style>
  .wrap{ max-width:860px; margin:0 auto; padding:22px 18px 48px; }
  .title{ font-size:28px; font-weight:900; margin:0; letter-spacing:-.3px; }
  .sub{ margin:8px 0 18px; color:#64748b; font-size:14px; }

  .list{ display:flex; flex-direction:column; gap:10px; }
  .item{
    display:flex; justify-content:space-between; align-items:center;
    background:#fff; border:1px solid rgba(15,23,42,0.08);
    border-radius:14px; padding:14px 14px;
    text-decoration:none; color:#0f172a;
  }
  .item:hover{ border-color:rgba(37,99,235,.25); box-shadow:0 6px 18px rgba(37,99,235,.10); }
  .left{ display:flex; flex-direction:column; gap:3px; min-width:0; }
  .name{ font-size:16px; font-weight:900; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  .desc{ font-size:13px; color:#475569; }
  .go{ font-weight:900; color:#1d4ed8; }

  .empty{
    padding:14px 16px; border:1px dashed #d9e2f5; border-radius:14px;
    color:#64748b; background:#fbfdff;
  }

  /* ✅ pager */
  .pager{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:10px;
    margin:18px 0 0;
  }
  .pager .info{
    font-weight:900;
    color:#334155;
    padding:8px 10px;
    border-radius:12px;
    background:#f1f5ff;
    border:1px solid rgba(37,99,235,.18);
    line-height:1;
  }
  .pager .btn-like{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:10px 12px;
    border-radius:12px;
    border:1px solid rgba(15,23,42,0.10);
    background:#fff;
    color:#0f172a;
    text-decoration:none;
    font-weight:900;
  }
  .pager .btn-like:hover{
    border-color:rgba(37,99,235,.25);
    box-shadow:0 6px 18px rgba(37,99,235,.10);
  }
  .pager .btn-primary-like{
    border-color:rgba(37,99,235,.25);
    background:#2563eb;
    color:#fff;
  }
  .pager .btn-primary-like:hover{
    box-shadow:0 8px 22px rgba(37,99,235,.18);
  }
  .pager .disabled{
    opacity:.45;
    pointer-events:none;
  }
  .quiz-intro{
  margin: 14px 0 18px;
  padding: 16px 18px;
  background:#ffffff;
  border-radius:16px;
  border:1px solid rgba(15,23,42,0.08);
}

.quiz-intro h2{
  margin:0 0 8px;
  font-size:18px;
  font-weight:900;
}

.quiz-intro p{
  margin:6px 0;
  font-size:14px;
  line-height:1.6;
  color:#475569;
}

</style>

<div class="wrap">
  <h1 class="title">상황 대화 퀴즈</h1>
  <p class="sub">그림과 대화를 보고, 지금 상황에 알맞은 문장을 골라 맞혀보세요.</p>
<div class="quiz-intro">
  <h2>상황 대화 퀴즈란?</h2>
  <p>
    실제 일본 여행과 일상에서 자주 등장하는 대화 상황을 보고,
    문맥에 가장 자연스러운 일본어 표현을 고르는 퀴즈입니다.
  </p>
  <p>
    일본어 문장, 발음, 한국어 뜻을 함께 비교하며
    <b>읽기 이해력과 상황 판단 능력</b>을 집중적으로 연습할 수 있어요.
  </p>
</div>


  {% if quizzes and quizzes|length > 0 %}
    <div class="list">
      {% for q in quizzes %}
        <a class="item"
           href="{{ url_for('dialog_quiz_play', quiz_id=q.id) }}"
           aria-label="{{ (q.title or '대화 퀴즈') | e }} 시작">
          <div class="left">
            <div class="name">{{ (q.title or "대화 퀴즈") | e }}</div>
            <div class="desc">문제 풀기</div>
          </div>
          <div class="go">시작 →</div>
        </a>
      {% endfor %}
    </div>

    {# ✅ 페이지 버튼 (page/total_pages는 라우트에서 넘겨줘야 함) #}
    {% if total_pages and total_pages > 1 %}
      <div class="pager">
        {% if page > 1 %}
          <a class="btn-like" href="{{ url_for('quiz_dialog_list', page=page-1) }}">← 이전</a>
        {% else %}
          <span class="btn-like disabled">← 이전</span>
        {% endif %}

        <span class="info">{{ page }} / {{ total_pages }}</span>

        {% if page < total_pages %}
          <a class="btn-like btn-primary-like" href="{{ url_for('quiz_dialog_list', page=page+1) }}">다음 →</a>
        {% else %}
          <span class="btn-like btn-primary-like disabled">다음 →</span>
        {% endif %}
      </div>
    {% endif %}

  {% else %}
    <div class="empty">
      아직 등록된 대화 퀴즈가 없어요. (관리자가 퀴즈를 추가하면 여기에 표시됩니다.)
    </div>
  {% endif %}
</div>

{% endblock %}
