{% extends "base.html" %}

{# âœ… ê²Œì‹œíŒ ëª©ë¡ SEO #}
{% set page_title = (q and ("ê²Œì‹œíŒ ê²€ìƒ‰: " ~ q ~ " | ì¼ë³¸ ì—¬í–‰ íšŒí™” ê³µë¶€ë°©") ) or "ì¼ë°˜ê²Œì‹œíŒ | ì¼ë³¸ ì—¬í–‰ íšŒí™” ê³µë¶€ë°©" %}
{% set page_desc = (q and ("ì¼ë°˜ê²Œì‹œíŒì—ì„œ '" ~ q ~ "' ê²€ìƒ‰ ê²°ê³¼ì…ë‹ˆë‹¤.") ) or "ì¼ë³¸ ì—¬í–‰ íšŒí™” ê³µë¶€ë°© ì¼ë°˜ê²Œì‹œíŒì…ë‹ˆë‹¤. ììœ ë¡­ê²Œ ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”." %}
{% set page_robots = "index,follow" %}

{% block content %}

<style>
  .board-table { width:100%; border-collapse:collapse; table-layout:fixed; }
  .board-table th, .board-table td { padding:12px 12px; text-align:left; border-bottom:1px solid rgba(15,23,42,0.06); }
  .board-table th { font-size:12px; color:#64748b; font-weight:900; background:#fafcff; }
  .board-table td { font-size:14px; color:#0f172a; vertical-align:middle; }

  .td-center { text-align:center; }

  .title-wrap { min-width:0; }
  .title-line {
    display:flex;
    align-items:center;
    gap:8px;
    min-width:0;
    font-weight:900;
  }
  .title-link{
    min-width:0;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
    text-decoration:none;
    color:inherit;
  }

  .author-box{ display:flex; align-items:center; gap:8px; min-width:0; }
  .author-name{
    min-width:0;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
    font-weight:800;
  }

  .meta { font-size:13px; color:#334155; font-weight:800; }
  .date { font-size:12px; color:#64748b; font-weight:800; }

  .notice-flag{
    display:inline-flex; align-items:center; gap:6px;
    font-size:12px; font-weight:900;
    color:#b45309;
    background:#fff7ed;
    border:1px solid #fdba74;
    border-radius:999px;
    padding:3px 9px;
    flex:0 0 auto;
  }
 .board-hero{
  margin: 12px 0 14px;
  padding: 14px;
  border-radius: 18px;
  background:
    linear-gradient(#ffffff, #ffffff) padding-box,
    linear-gradient(135deg, rgba(37,99,235,.30), rgba(34,197,94,.25), rgba(99,102,241,.25)) border-box;
  border: 1px solid transparent;
  box-shadow: 0 10px 30px rgba(15,23,42,0.06);
}

.bh-top{
  display:flex;
  gap:12px;
  align-items:flex-start;
}

.bh-icon{
  width:44px;
  height:44px;
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(37,99,235,0.10);
  border: 1px solid rgba(37,99,235,0.18);
  font-size:20px;
  flex: 0 0 auto;
}

.bh-title{
  font-size:16px;
  font-weight:900;
  color:#0f172a;
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}

.bh-pill{
  font-size:12px;
  font-weight:900;
  padding:6px 10px;
  border-radius:999px;
  background:#f1f5ff;
  border:1px solid rgba(37,99,235,.18);
  color:#1d4ed8;
}

.bh-desc{
  margin-top:6px;
  color:#475569;
  font-size:13.5px;
  line-height:1.6;
  font-weight:700;
}

.bh-desc2{
  display:block;
  margin-top:4px;
  color:#64748b;
  font-weight:700;
}

.bh-actions{
  margin-top:10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.bh-link{
  font-size:13px;
  font-weight:900;
  color:#2563eb;
  text-decoration:none;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid rgba(37,99,235,.18);
  background:#ffffff;
}

.bh-link:hover{
  box-shadow: 0 8px 20px rgba(37,99,235,.12);
  border-color: rgba(37,99,235,.28);
}
/* ì™¼ìª½/ì˜¤ë¥¸ìª½ ê¸°ë³¸ */
.board-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:24px;
}

/* ì™¼ìª½ */
.bh-left{ flex:1; min-width:0; }

/* ì˜¤ë¥¸ìª½: ì¸íŠ¸ë¡œ ë°•ìŠ¤(.board-hero) ìƒë‹¨ ë¼ì¸ì— ë§ì¶”ê¸° */
.bh-right{
  width:320px;                /* ì˜¤ë¥¸ìª½ í­ ê³ ì •(ì˜ˆì˜ê²Œ) */
  display:flex;
  flex-direction:column;
  align-items:stretch;        /* input/buttonì´ ê°™ì€ í­ */
  gap:10px;

  margin-top:52px;            /* âœ… ì´ ê°’ìœ¼ë¡œ "ì¸íŠ¸ë¡œë°•ìŠ¤ ìƒë‹¨" ë¼ì¸ ë§ì¶¤ */
}

/* ê²€ìƒ‰ í¼ì„ ì„¸ë¡œí­ ê½‰ ì“°ê¸° */
.board-search{
  display:flex;
  gap:8px;
}

.board-search input{
  flex:1;                     /* âœ… 220px ê³ ì • ëŒ€ì‹  ê½‰ ì°¨ê²Œ */
  width:auto;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid #d9e2ef;
  background:#fff;
  font-size:14px;
}

.board-search button{
  padding:10px 14px;
  border-radius:12px;
  border:none;
  background:#2563eb;
  color:#fff;
  font-weight:800;
  cursor:pointer;
}

/* ê¸€ì“°ê¸° ë²„íŠ¼ë„ ê²€ìƒ‰ì°½ê³¼ ë™ì¼ í­ */
.write-btn{
  width:100%;
  text-align:center;
  padding:12px 14px;
  border-radius:12px;
}
/* =========================
   âœ… Board mobile card view
   PC í…Œì´ë¸” ìœ ì§€ / ëª¨ë°”ì¼ë§Œ ì¹´ë“œí˜•
   ========================= */
@media (max-width: 640px){

  /* ìƒë‹¨ í—¤ë”(ì™¼ìª½/ì˜¤ë¥¸ìª½) ì„¸ë¡œ ì •ë ¬ */
  .board-head{
    flex-direction: column !important;
    gap: 12px !important;
    align-items: stretch !important;
  }
  .bh-right{
    width: 100% !important;
    margin-top: 0 !important;
  }

  /* ê²€ìƒ‰í¼ ëª¨ë°”ì¼ í­ 100% */
  .board-search{
    width: 100%;
  }
  .board-search input{
    width: 100% !important;
    min-width: 0 !important;
  }
  .write-btn{
    width: 100% !important;
  }

  /* í…Œì´ë¸” â†’ ì¹´ë“œí˜• */
  .board-table thead{
    display: none;
  }
  .board-table, .board-table tbody, .board-table tr, .board-table td{
    display: block;
    width: 100%;
  }

  .board-table{
    border-collapse: separate;
    border-spacing: 0 10px; /* ì¹´ë“œ ì‚¬ì´ ê°„ê²© */
  }

  .board-table tr{
    background: #fff;
    border: 1px solid rgba(15,23,42,0.08);
    border-radius: 14px;
    padding: 12px 12px;
    box-shadow: 0 8px 20px rgba(15,23,42,0.06);
    overflow: hidden;
  }

  /* ë²ˆí˜¸(ê³µì§€/ID)ëŠ” ìƒë‹¨ ë©”íƒ€ë¡œ */
  .board-table td{
    border-bottom: none;
    padding: 6px 0;
  }

  /* ì œëª© ì¤„ */
  .board-table td:nth-child(2) .title-line{
    font-size: 16px;
    line-height: 1.3;
    word-break: keep-all;
    overflow-wrap: anywhere;
  }
  .title-link{
    white-space: normal;
    overflow: visible;
    text-overflow: unset;
  }

  /* ì‘ì„±ì/ì¶”ì²œ/ì¡°íšŒ/ë‚ ì§œë¥¼ í•œ ì¤„ ë©”íƒ€ë¡œ ë¬¶ì–´ ë³´ì´ê²Œ */
  .board-table td:nth-child(3),
  .board-table td:nth-child(4),
  .board-table td:nth-child(5),
  .board-table td:nth-child(6){
    display: inline-block;
    width: auto;
    padding: 0;
    margin-right: 10px;
    font-size: 13px;
    color: #475569;
    font-weight: 800;
  }

  /* ë¼ë²¨ ëŠë‚Œ ì¶”ê°€ */
  .board-table td:nth-child(4)::before{ content:"ğŸ‘ "; }
  .board-table td:nth-child(5)::before{ content:"ğŸ‘ï¸ "; }
  .board-table td:nth-child(6)::before{ content:"ğŸ—“ï¸ "; }

  /* ë²ˆí˜¸ì¹¸ì€ ì‘ê²Œ */
  .board-table td:nth-child(1){
    font-size: 12px;
    color:#64748b;
    font-weight: 900;
    padding: 0 0 6px;
  }

  /* td-center ê°•ì œ ê°€ìš´ë° ì •ë ¬ ë¬´ë ¥í™”(ëª¨ë°”ì¼ ì¹´ë“œì—ì„œ) */
  .td-center{ text-align:left; }
}


</style>

<section class="page-head board-head">
  <!-- ğŸ”¹ ì™¼ìª½ ì˜ì—­ -->
  <div class="bh-left">
    <h1>ğŸ’¬ ì¼ë°˜ê²Œì‹œíŒ</h1>

    <!-- ê²Œì‹œíŒ ì•ˆë‚´ ë°°ë„ˆ -->
    <div class="board-hero">
      <div class="bh-top">
        <div class="bh-icon" aria-hidden="true">ğŸ’¬</div>

        <div class="bh-text">
          <div class="bh-title">
            ì¼ë³¸ì–´ í•™ìŠµ ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ
            <span class="bh-pill">ì§ˆë¬¸ Â· í›„ê¸° Â· ê¿€íŒ</span>
          </div>
          <div class="bh-desc">
            ì¼ë³¸ì–´ íšŒí™” ê³µë¶€ë°© ì´ìš©ìë“¤ì´ <b>ì—¬í–‰ íšŒí™” ê²½í—˜</b>, <b>ê³µë¶€ ë°©ë²•</b>, <b>ì¶”ì²œ í‘œí˜„</b>ì„ ê³µìœ í•˜ëŠ” ê³µê°„ì´ì—ìš”.
            <span class="bh-desc2">
              ì¼ë³¸ì–´ íšŒí™”Â·ë‹¨ì–´Â·ì—¬í–‰ í‘œí˜„ ë“± í•™ìŠµ ì£¼ì œë¡œ ììœ ë¡­ê²Œ ì°¸ì—¬í•´ ì£¼ì„¸ìš”.
            </span>
          </div>
        </div>
      </div>
    </div>

    {% if q %}
      <p class="bh-query">
        ê²€ìƒ‰ì–´: <b>{{ q | e }}</b>
        Â· <a href="{{ url_for('board') }}">ì „ì²´ ë³´ê¸°</a>
      </p>
    {% else %}
      <p class="bh-query">ììœ ë¡­ê²Œ ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”.</p>
    {% endif %}
  </div>

  <!-- ğŸ”¹ ì˜¤ë¥¸ìª½ ì˜ì—­ -->
  <div class="bh-right">
    <!-- ê²€ìƒ‰ -->
    <form method="GET" action="{{ url_for('board') }}" class="board-search">
      <input
        type="text"
        name="q"
        value="{{ (q or '') | e }}"
        placeholder="ì œëª© ë˜ëŠ” ë‚´ìš© ê²€ìƒ‰">
      <button type="submit">ê²€ìƒ‰</button>
    </form>

    <!-- ê¸€ì“°ê¸° -->
    {% if user %}
      <a class="btn btn-primary write-btn" href="{{ url_for('board_write') }}">
        ê¸€ì“°ê¸°
      </a>
    {% else %}
      <a class="btn write-btn" href="{{ url_for('login', next=url_for('board')) }}">
        ë¡œê·¸ì¸ í›„ ê¸€ì“°ê¸°
      </a>
    {% endif %}
  </div>
</section>



<div class="board-wrap" style="padding:0; overflow:hidden;">
  <table class="board-table">
    <colgroup>
      <col style="width:70px;">   {# ë²ˆí˜¸ #}
      <col>                      {# ì œëª©(ê°€ì¥ ë„“ê²Œ) #}
      <col style="width:160px;"> {# ì‘ì„±ì #}
      <col style="width:70px;">  {# ì¶”ì²œ #}
      <col style="width:70px;">  {# ì¡°íšŒ #}
      <col style="width:90px;">  {# ë“±ë¡ì¼ #}
    </colgroup>

    <thead>
      <tr>
        <th class="td-center">ë²ˆí˜¸</th>
        <th>ì œëª©</th>
        <th>ì‘ì„±ì</th>
        <th class="td-center">ì¶”ì²œ</th>
        <th class="td-center">ì¡°íšŒ</th>
        <th class="td-center">ë“±ë¡ì¼</th>
      </tr>
    </thead>

    <tbody>
      {% if posts and posts|length > 0 %}
        {% for p in posts %}
          <tr class="{% if p.is_notice == 1 %}notice-row{% endif %}">
            <td class="td-center meta">
              {% if p.is_notice == 1 %}
                ê³µì§€
              {% else %}
  {{ p.id }}
{% endif %}

            </td>

            <td>
              <div class="title-wrap">
                <div class="title-line">
                  {% if p.is_notice == 1 %}
                    <span class="notice-flag">ğŸ“Œ ê³µì§€</span>
                  {% endif %}

                  <a class="title-link" href="{{ url_for('board_detail', post_id=p.id) }}">
                    {{ p.title | e }}
                  </a>
                </div>
              </div>
            </td>

            <td>
              <div class="author-box">
                {% set grade_txt = (p.author_grade or 'ì¼ë°˜')|trim %}
                <span class="pill {% if 'ê´€ë¦¬ì' in grade_txt or 'ğŸ‘‘' in grade_txt %}pill-admin{% endif %}">
                  {{ grade_txt }}
                </span>

                <a href="#"
                  class="author-name mc-open"
                  data-nick="{{ p.author_nickname }}"
                  style="color:#2563eb; text-decoration:underline; text-underline-offset:3px; cursor:pointer;">
                  {{ p.author_nickname | e }}
                </a>

              </div>
            </td>

            <td class="td-center meta">{{ p.upvotes or 0 }}</td>
            <td class="td-center meta">{{ p.views or 0 }}</td>
            <td class="td-center date">{{ p.created_at|mmdd }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="6" style="padding:18px 16px; color:#64748b;">
            {% if q %}
              ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
            {% else %}
              ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
            {% endif %}
          </td>
        </tr>
      {% endif %}
    </tbody>
  </table>
</div>

{% endblock %}
