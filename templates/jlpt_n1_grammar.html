{% extends "base.html" %}

{% block title %}JLPT N1 문법 | 고급 문법 정리{% endblock %}

{# ✅ JLPT 전용 CSS를 base.html 위에 추가 로드 #}
{% block extra_head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jlpt.css') }}">
{% endblock %}

{% block content %}

<!-- ✅ 상단 소개 -->
<div class="jlpt-card jlpt-intro">
  <h2 class="jlpt-intro-title">📌 JLPT N1 문법</h2>
  <p class="jlpt-intro-desc">이 페이지는 JLPT N1 시험을 준비하는 학습자를 위해
일본어의 기본 문법 요소를 정리한 학습 자료입니다.
<br>
    N1 문법은 <b>문어체</b>, <b>논리/평가</b>, <b>강한 단정</b>, <b>복합 연결</b>이 많아서
    “뜻”보다 <b>뉘앙스 + 용례(어떤 문맥에서 자연스러운지)</b>가 점수를 좌우합니다. <br>
    아래 분류를 눌러서 필요한 문법만 골라 반복하세요.
  </p>

  <ul class="jlpt-intro-list">
    <li><b>추천 루틴</b>: 문법 2개 → 예문 듣기 → 상황(1줄) → 변형 2개 → 독해 문장 1개 만들어보기</li>
    <li><b>Tip</b>: N1은 “비슷한 표현 구분”이 핵심이라 <b>주의</b>를 꼭 같이 보세요.</li>
  </ul>

  <p class="jlpt-intro-tip">※ 발음 듣기는 버튼을 누르면 일본어 음성으로 재생됩니다.</p>

  <!-- ✅ 상단 이동 버튼 -->
  <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
    <a class="btn btn-outline" href="{{ url_for('jlpt_n1_home') }}">← N1 홈으로</a>
  </div>
</div>

<!-- ✅ 분류(칩) : N1 추천 10분류 -->
<div class="jlpt-card" style="display:flex; gap:8px; flex-wrap:wrap;">
  <button class="jlpt-chip is-on" type="button" data-filter="all">전체</button>
  <button class="jlpt-chip" type="button" data-filter="logic">논리/전개</button>
  <button class="jlpt-chip" type="button" data-filter="contrast">대조/양보</button>
  <button class="jlpt-chip" type="button" data-filter="judgement">단정/평가</button>
  <button class="jlpt-chip" type="button" data-filter="limit">한정/강조</button>
  <button class="jlpt-chip" type="button" data-filter="reason">원인/결과</button>
  <button class="jlpt-chip" type="button" data-filter="time">시간/전환</button>
  <button class="jlpt-chip" type="button" data-filter="attitude">태도/감정</button>
  <button class="jlpt-chip" type="button" data-filter="formal">문어/공식</button>
  <button class="jlpt-chip" type="button" data-filter="pattern">관용 패턴</button>
</div>

<div class="jlpt-card jlpt-note" style="margin-top:12px;">
  <div style="color:#475569; font-weight:700;">
    🔎 N1은 “문장 전체 구조”로 판단하는 문제가 많습니다. <b>분해</b>를 꼭 같이 보세요.
  </div>
</div>

<!-- =========================
     스타일(페이지 전용) - 기존과 동일
========================= -->
<style>
  .g-card{border:1px solid #e5e7eb; border-radius:14px; padding:16px; background:#fff; box-shadow:0 8px 20px rgba(0,0,0,.04); margin-bottom:12px;}
  .g-head{display:flex; align-items:flex-start; justify-content:space-between; gap:10px;}
  .g-title{font-size:18px; font-weight:950; color:#0b1f4b; margin:0;}
  .g-tag{font-size:12px; font-weight:900; color:#334155; background:#f1f5ff; border:1px solid #dbe7ff; padding:6px 10px; border-radius:999px; white-space:nowrap;}
  .g-desc{margin:8px 0 0; color:#374151; line-height:1.7; font-weight:650; font-size:14px;}
  .g-rule{margin:10px 0 0; padding:10px 12px; border:1px dashed #e5e7eb; border-radius:12px; background:#fbfdff; color:#475569; font-size:13px; line-height:1.7;}
  .g-warn{margin:10px 0 0; padding:10px 12px; border-radius:12px; background:#f8fafc; border:1px solid #e5e7eb; color:#475569; font-size:13px; line-height:1.7;}

  .g-extra{margin:12px 0 0; padding:12px 12px; border:1px solid #e5e7eb; border-radius:12px; background:#ffffff;}
  .g-extra .x-row{display:flex; gap:10px; align-items:flex-start; padding:6px 0; border-bottom:1px dashed #eef2f7;}
  .g-extra .x-row:last-child{border-bottom:none;}
  .g-extra .x-k{min-width:60px; font-weight:950; color:#0b1f4b; font-size:13px;}
  .g-extra .x-v{color:#334155; font-weight:750; font-size:13px; line-height:1.7;}
  .x-badge{display:inline-block; margin-right:6px; font-size:12px; font-weight:950; color:#0b1f4b; background:#eef2ff; border:1px solid #dbe7ff; padding:2px 8px; border-radius:999px;}

  .ex{margin-top:12px; padding-top:12px; border-top:1px solid #eef2f7;}
  .ex-row{display:flex; gap:10px; align-items:flex-start; justify-content:space-between; padding:10px 0; border-bottom:1px dashed #eef2f7;}
  .ex-row:last-child{border-bottom:none;}
  .ex-left{flex:1;}
  .ex-jp{font-size:16px; font-weight:900; color:#111827;}
  .ex-pron{margin-top:4px; color:#64748b; font-weight:700; font-size:13px;}
  .ex-ko{margin-top:4px; color:#334155; font-weight:700; font-size:13px;}

  .ex-use{
    margin-top:6px;
    color:#475569;
    font-weight:800;
    font-size:12.5px;
    line-height:1.55;
    background:#f8fafc;
    border:1px solid #e5e7eb;
    padding:6px 10px;
    border-radius:10px;
    display:inline-block;
  }

  .hl{
    display:inline-block;
    padding:1px 6px;
    border-radius:8px;
    border:1px solid #fde68a;
    background:#fffbeb;
    color:#92400e;
    font-weight:950;
    box-shadow:0 2px 8px rgba(0,0,0,.04);
  }

  .tts-btn{
    height:36px; padding:0 12px; border-radius:999px; border:1px solid #dbe7ff;
    background:#f1f5ff; color:#0b1f4b; font-weight:900; font-size:13px; cursor:pointer;
    white-space:nowrap;
  }
  .tts-btn:hover{background:#eaf0ff;}
</style>

<div id="grammarList"></div>
{% endblock %}

{% block extra_scripts %}
<script>
/* ==========================================================
  ✅ N1 문법 데이터(풀세트 80개) - 대표/빈출 중심
  - cat/tag/title/desc/rule/warn/extra/examples 형식 고정
========================================================== */
const grammarData = [
  /* =======================
     logic: 논리/전개
  ======================= */
  {
    cat:"logic", tag:"논리/전개", title:"～にほかならない (…에 다름 아니다)",
    desc:"원인/정체를 강하게 단정",
    rule:"名詞 + <span class='hl'>にほかならない</span>",
    warn:"문어체. 논설/평론에서 ‘결론 단정’으로 빈출.",
    extra:{
      core:"<span class='x-badge'>단정</span> “~에 다름 아니다”",
      situation:"원인을 ‘단정’하며 결론 낼 때(기사/논설)",
      breakdown:"成功の理由 + にほかならない",
      caution:"강한 단정 → 가벼운 회화에는 과함",
      variation:"努力の結果にほかならない。"
    },
    examples:[
      {jp:"この成功は努力の結果にほかなりません。", pron:"코노 세이코오와 도료쿠노 켓카니 호카나리마센", ko:"이 성공은 노력의 결과에 다름 아닙니다.", use:"✅ 논설", highlight:["にほかなりません"]},
      {jp:"彼の発言は責任逃れにほかならない。", pron:"카레노 하츠겐와 세키닌 노가레니 호카나라나이", ko:"그의 발언은 책임 회피에 다름 아니다.", use:"✅ 비판", highlight:["にほかならない"]},
      {jp:"それは事実の隠蔽にほかならない。", pron:"소레와 지지츠노 인페에니 호카나라나이", ko:"그건 사실 은폐에 다름 아니다.", use:"✅ 고발", highlight:["にほかならない"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～をもって (…로써/…을 기준으로)",
    desc:"시점·수단을 공식적으로 표시",
    rule:"名詞 + <span class='hl'>をもって</span>",
    warn:"공지/규정/문서에서 종료·개시·선언에 자주.",
    extra:{
      core:"<span class='x-badge'>공식</span> “~로써(시점/수단)”",
      situation:"안내문에서 종료/개시 시점 명시",
      breakdown:"本日をもって + 終了します",
      caution:"회화에서는 ‘で/から’가 자연",
      variation:"これをもって会議を終わります。"
    },
    examples:[
      {jp:"本日をもって受付を終了します。", pron:"혼지츠오 못테 우케츠케오 슈우료오시마스", ko:"금일부로 접수를 종료합니다.", use:"✅ 공지", highlight:["をもって"]},
      {jp:"これをもって会議を終わります。", pron:"코레오 못테 카이기오 오와리마스", ko:"이로써 회의를 마치겠습니다.", use:"✅ 사회", highlight:["をもって"]},
      {jp:"規定をもって判断します。", pron:"키테에오 못테 한단시마스", ko:"규정에 따라 판단합니다.", use:"✅ 규정", highlight:["をもって"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～を余儀なくされる (…을 어쩔 수 없이 하게 되다)",
    desc:"외부 요인으로 불가피하게(기사/문어)",
    rule:"名詞 + <span class='hl'>を余儀なくされる</span>",
    warn:"정책/경제/사고 기사에서 매우 빈출.",
    extra:{
      core:"<span class='x-badge'>불가피</span> “~을 강요받다”",
      situation:"중단/변경/퇴각",
      breakdown:"中止 + を余儀なくされる",
      caution:"주체 의지 X, 외부 압력 O",
      variation:"撤退を余儀なくされた。"
    },
    examples:[
      {jp:"悪天候のため、開催中止を余儀なくされた。", pron:"아쿠텐코오노 타메, 카이사이츄우시오 요기나쿠사레타", ko:"악천후로 개최 중지를 어쩔 수 없이 하게 됐다.", use:"✅ 뉴스", highlight:["を余儀なくされた"]},
      {jp:"企業は方針転換を余儀なくされている。", pron:"키교오와 호오신텐칸오 요기나쿠사레테이루", ko:"기업은 방침 전환을 강요받고 있다.", use:"✅ 경제", highlight:["を余儀なくされている"]},
      {jp:"住民は避難を余儀なくされた。", pron:"주우민와 히난오 요기나쿠사레타", ko:"주민은 피난을 어쩔 수 없이 하게 됐다.", use:"✅ 재난", highlight:["を余儀なくされた"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～を皮切りに (…을 시작으로)",
    desc:"연쇄적으로 이어지는 전개(문어)",
    rule:"名詞 + <span class='hl'>を皮切りに</span>",
    warn:"‘첫 사건/첫 발표’ 이후 연속 전개에 자주.",
    extra:{
      core:"<span class='x-badge'>전개</span> “~을 시작으로”",
      situation:"전국투어/연재/연속 발표",
      breakdown:"東京公演を皮切りに + 全国へ",
      caution:"‘きっかけ’보다 ‘연쇄 전개’ 강조",
      variation:"第一弾を皮切りに続々と。"
    },
    examples:[
      {jp:"東京公演を皮切りに全国ツアーが始まった。", pron:"토오쿄오 코오엔오 카와키리니 젠코쿠 츠아아가 하지맛타", ko:"도쿄 공연을 시작으로 전국 투어가 시작됐다.", use:"✅ 홍보/기사", highlight:["を皮切りに"]},
      {jp:"第一弾を皮切りに次々と発表された。", pron:"다이이치단오 카와키리니 츠기츠기토 핫표오사레타", ko:"1탄을 시작으로 잇달아 발표됐다.", use:"✅ 전개", highlight:["を皮切りに"]},
      {jp:"この事件を皮切りに問題が表面化した。", pron:"코노 지켄오 카와키리니 몬다이가 효오멘카시타", ko:"이 사건을 시작으로 문제가 표면화했다.", use:"✅ 논설", highlight:["を皮切りに"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～をめぐって (…을 둘러싸고)",
    desc:"쟁점/논쟁/상황 전개(문어)",
    rule:"名詞 + <span class='hl'>をめぐって</span>",
    warn:"‘논의/대립/의혹’ 기사체에서 초빈출.",
    extra:{
      core:"<span class='x-badge'>쟁점</span> “~을 둘러싸고”",
      situation:"협상/정책/분쟁",
      breakdown:"規制をめぐって + 議論",
      caution:"連体形: ～をめぐる",
      variation:"資金をめぐる疑惑。"
    },
    examples:[
      {jp:"新制度をめぐって議論が続いている。", pron:"신세이도오 메굿테 기론가 츠즈이테이루", ko:"새 제도를 둘러싸고 논의가 계속되고 있다.", use:"✅ 기사", highlight:["をめぐって"]},
      {jp:"土地をめぐる争いが起きた。", pron:"토치오 메구루 아라소이가 오키타", ko:"토지를 둘러싼 다툼이 일어났다.", use:"✅ 사건", highlight:["をめぐる"]},
      {jp:"予算をめぐって各党が対立した。", pron:"요산오 메굿테 카쿠토오가 타이리츠시타", ko:"예산을 둘러싸고 각 당이 대립했다.", use:"✅ 정치", highlight:["をめぐって"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～に即して (…에 즉하여)",
    desc:"기준/실태에 맞춰(문어)",
    rule:"名詞 + <span class='hl'>に即して</span>",
    warn:"보고서·기획서에서 ‘現状に即して’로 빈출.",
    extra:{ core:"<span class='x-badge'>기준</span> “~에 맞춰”", situation:"현실/규정에 맞게", breakdown:"現状 + に即して + 判断", caution:"‘基づく’보다 ‘실태 맞춤’", variation:"実態に即した対策。" },
    examples:[
      {jp:"現状に即して対応を見直す。", pron:"겐죠오니 즉시테 타이오오오 미나오스", ko:"현황에 맞춰 대응을 재검토한다.", use:"✅ 보고서", highlight:["に即して"]},
      {jp:"実態に即した制度が必要だ。", pron:"짓타이니 즉시타 세이도가 히츠요오다", ko:"실태에 맞는 제도가 필요하다.", use:"✅ 논설", highlight:["に即した"]},
      {jp:"規定に即して処理します。", pron:"키테에니 즉시테 쇼리시마스", ko:"규정에 맞춰 처리합니다.", use:"✅ 업무", highlight:["に即して"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～を踏まえて (…을 바탕으로/고려하여)",
    desc:"앞의 사실을 반영해 결론",
    rule:"名詞 + <span class='hl'>を踏まえて</span>",
    warn:"N1 독해 ‘근거→결론’ 전개 핵심.",
    extra:{ core:"<span class='x-badge'>반영</span> “~을 바탕으로”", situation:"데이터/상황 반영", breakdown:"結果を踏まえて + 改善", caution:"‘基づく’보다 ‘고려/반영’", variation:"状況を踏まえた判断。" },
    examples:[
      {jp:"調査結果を踏まえて方針を決める。", pron:"초오사 켓카오 후마에테 호오신오 키메루", ko:"조사 결과를 바탕으로 방침을 정한다.", use:"✅ 보고서", highlight:["を踏まえて"]},
      {jp:"現状を踏まえた上で議論すべきだ。", pron:"겐죠오오 후마에타 우에데 기론스베키다", ko:"현황을 고려한 뒤 논의해야 한다.", use:"✅ 논설", highlight:["踏まえた"]},
      {jp:"実績を踏まえて評価します。", pron:"짓세키오 후마에테 효오카시마스", ko:"실적을 반영해 평가합니다.", use:"✅ 업무", highlight:["を踏まえて"]}
    ]
  },

  /* =======================
     contrast: 대조/양보
  ======================= */
  {
    cat:"contrast", tag:"대조/양보", title:"～といえども (…이라 해도)",
    desc:"지위/예외 인정해도 원칙 동일(격식)",
    rule:"名詞 + <span class='hl'>といえども</span>",
    warn:"법/규정/원칙에서 강한 문어체.",
    extra:{
      core:"<span class='x-badge'>원칙</span> “~이라 해도”",
      situation:"규칙은 누구에게나 적용",
      breakdown:"子ども + といえども + 例外なし",
      caution:"N2 ‘とはいえ’보다 강하고 문어",
      variation:"未経験者といえども準備は必要だ。"
    },
    examples:[
      {jp:"子どもといえども、約束は守るべきだ。", pron:"코도모 토이에도모 야쿠소쿠와 마모루베키다", ko:"아이라 해도 약속은 지켜야 한다.", use:"✅ 원칙", highlight:["といえども"]},
      {jp:"専門家といえども間違うことはある。", pron:"셈몬카 토이에도모 마치가우 코토와 아루", ko:"전문가라도 틀릴 때가 있다.", use:"✅ 일반화", highlight:["といえども"]},
      {jp:"忙しいといえども、返信くらいはできる。", pron:"이소가시이 토이에도모 헨신쿠라이와 데키루", ko:"바쁘다 해도 답장 정도는 할 수 있다.", use:"✅ 요구", highlight:["といえども"]}
    ]
  },
  {
    cat:"contrast", tag:"대조/양보", title:"～にもかかわらず (…에도 불구하고)",
    desc:"강한 역접(문어)",
    rule:"普通形 + <span class='hl'>にもかかわらず</span>",
    warn:"기사/논설에서 ‘예상 반대 결과’로 빈출.",
    extra:{
      core:"<span class='x-badge'>역접</span> “~에도 불구하고”",
      situation:"예상과 반대되는 결과",
      breakdown:"努力した + にもかかわらず + 失敗",
      caution:"‘のに’보다 격식 강함",
      variation:"雨にもかかわらず、行列ができた。"
    },
    examples:[
      {jp:"大雨にもかかわらず、多くの人が集まった。", pron:"오오아메니모 카카와라즈 오오쿠노 히토가 아츠맛타", ko:"폭우에도 불구하고 많은 사람이 모였다.", use:"✅ 기사", highlight:["にもかかわらず"]},
      {jp:"忠告したにもかかわらず、彼は聞かなかった。", pron:"츄우코쿠시타니모 카카와라즈 카레와 키카나캇타", ko:"충고했음에도 그는 듣지 않았다.", use:"✅ 비판", highlight:["にもかかわらず"]},
      {jp:"準備不足にもかかわらず、結果は良かった。", pron:"준비부족니모 카카와라즈 켓카와 요캇타", ko:"준비 부족에도 결과는 좋았다.", use:"✅ 역설", highlight:["にもかかわらず"]}
    ]
  },
  {
    cat:"contrast", tag:"대조/양보", title:"～なりとも (…이라도/…만이라도)",
    desc:"최소한의 양보(문어)",
    rule:"名詞 + <span class='hl'>なりとも</span>",
    warn:"‘せめて’의 문어 느낌.",
    extra:{ core:"<span class='x-badge'>최소</span> “~만이라도”", situation:"최소 요구/제안", breakdown:"一言なりとも + 言う", caution:"회화는 ‘でもいいから’", variation:"水なりともください。" },
    examples:[
      {jp:"水なりともください。", pron:"미즈 나리토모 쿠다사이", ko:"물이라도 주세요.", use:"✅ 최소 요청", highlight:["なりとも"]},
      {jp:"一言なりとも謝るべきだ。", pron:"히토코토 나리토모 아야마루베키다", ko:"한마디라도 사과해야 한다.", use:"✅ 주장", highlight:["なりとも"]},
      {jp:"何らかの形なりとも残したい。", pron:"난라카노 카타치 나리토모 노코시타이", ko:"어떤 형태로든(최소한) 남기고 싶다.", use:"✅ 문어", highlight:["なりとも"]}
    ]
  },
  {
    cat:"contrast", tag:"대조/양보", title:"～といったところだ (…정도다)",
    desc:"평가를 절제해 ‘그 정도’로 말함",
    rule:"普通形 + <span class='hl'>といったところだ</span>",
    warn:"‘과장 X’ 평가 표현. 독해 자주.",
    extra:{ core:"<span class='x-badge'>절제</span> “~정도”", situation:"평가/수준 한정", breakdown:"成功した + といったところだ", caution:"‘に過ぎない’보다 부드러움", variation:"現状は改善したといったところだ。" },
    examples:[
      {jp:"結果はまずまずといったところだ。", pron:"켓카와 마즈마즈 토잇타 토코로다", ko:"결과는 그럭저럭 정도다.", use:"✅ 평가", highlight:["といったところだ"]},
      {jp:"完成したが、満足とはいえないといったところだ。", pron:"칸세이시타가 만조쿠 토와이에나이 토잇타 토코로다", ko:"완성은 했지만 만족이라고 하긴 어려운 정도다.", use:"✅ 절제", highlight:["といったところだ"]},
      {jp:"知っている人は少ないといったところだ。", pron:"싯테이루 히토와 스쿠나이 토잇타 토코로다", ko:"아는 사람은 적은 편이다.", use:"✅ 경향", highlight:["といったところだ"]}
    ]
  },

  /* =======================
     judgement: 단정/평가
  ======================= */
  {
    cat:"judgement", tag:"단정/평가", title:"～を禁じ得ない (…을 금할 수 없다)",
    desc:"감정을 억누를 수 없음(문어)",
    rule:"名詞 + <span class='hl'>を禁じ得ない</span>",
    warn:"논평/기사에서 감정의 강한 문어 표현.",
    extra:{ core:"<span class='x-badge'>감정</span> “~을 금할 수 없다”", situation:"분노/동정/감동", breakdown:"怒り + を禁じ得ない", caution:"회화 X", variation:"涙を禁じ得ない。" },
    examples:[
      {jp:"彼の態度には怒りを禁じ得ない。", pron:"카레노 타이도니와 이카리오 킨지에나이", ko:"그의 태도에는 분노를 금할 수 없다.", use:"✅ 논평", highlight:["を禁じ得ない"]},
      {jp:"その話を聞いて涙を禁じ得なかった。", pron:"소노 하나시오 키이테 나미다오 킨지에나캇타", ko:"그 이야기를 듣고 눈물을 참을 수 없었다.", use:"✅ 감동", highlight:["を禁じ得なかった"]},
      {jp:"被害者への同情を禁じ得ない。", pron:"히가이샤에노 도오조오오 킨지에나이", ko:"피해자에 대한 동정을 금할 수 없다.", use:"✅ 기사", highlight:["を禁じ得ない"]}
    ]
  },
  {
    cat:"judgement", tag:"단정/평가", title:"～に足る (…할 만하다)",
    desc:"가치/자격이 충분함(문어)",
    rule:"動詞辞書形 + <span class='hl'>に足る</span>",
    warn:"평가/추천 문어 표현. ‘に足りない’도 세트.",
    extra:{ core:"<span class='x-badge'>가치</span> “~할 만하다”", situation:"칭찬/평가", breakdown:"信頼する + に足る", caution:"형식 글에 자연", variation:"称賛に足る成果。" },
    examples:[
      {jp:"彼の行動は称賛に足る。", pron:"카레노 코오도오와 쇼오산니 타루", ko:"그의 행동은 칭찬할 만하다.", use:"✅ 평가", highlight:["に足る"]},
      {jp:"信頼するに足る人物だ。", pron:"신라이스루니 타루 진부츠다", ko:"신뢰할 만한 인물이다.", use:"✅ 추천", highlight:["に足る"]},
      {jp:"その理由は説明に足りない。", pron:"소노 리유우와 세츠메에니 타리나이", ko:"그 이유는 설명으로는 부족하다.", use:"✅ 반박", highlight:["に足りない"]}
    ]
  },
  {
    cat:"judgement", tag:"단정/평가", title:"～をものともせず (…을 개의치 않고)",
    desc:"장애/비난 등을 신경 쓰지 않음(문어)",
    rule:"名詞 + <span class='hl'>をものともせず</span>",
    warn:"역경 극복 묘사에 자주.",
    extra:{ core:"<span class='x-badge'>무시</span> “~을 개의치 않고”", situation:"비난/추위/곤란", breakdown:"批判をものともせず + 続ける", caution:"‘をよそに’는 무관심, ‘ものともせず’는 ‘극복’ 뉘앙스", variation:"困難をものともせず前進する。" },
    examples:[
      {jp:"批判をものともせず改革を進めた。", pron:"히한오 모노토모세즈 카이카쿠오 스스메타", ko:"비판을 개의치 않고 개혁을 추진했다.", use:"✅ 기사", highlight:["をものともせず"]},
      {jp:"寒さをものともせず走り続けた。", pron:"사무사오 모노토모세즈 하시리츠즈케타", ko:"추위를 개의치 않고 달렸다.", use:"✅ 묘사", highlight:["をものともせず"]},
      {jp:"失敗をものともせず挑戦した。", pron:"싯파이오 모노토모세즈 초오센시타", ko:"실패를 개의치 않고 도전했다.", use:"✅ 의지", highlight:["をものともせず"]}
    ]
  },
  {
    cat:"judgement", tag:"단정/평가", title:"～べからず (…해서는 안 된다)",
    desc:"규범적 금지(고전/문어, 간판·규정)",
    rule:"動詞辞書形 + <span class='hl'>べからず</span>",
    warn:"현대 회화 거의 X. 간판/규정에서 N1로 등장.",
    extra:{ core:"<span class='x-badge'>금지</span> “~해서는 안 된다”", situation:"규칙/표어", breakdown:"立ち入る + べからず", caution:"‘てはいけない’의 문어형", variation:"関係者以外立ち入るべからず。" },
    examples:[
      {jp:"関係者以外立ち入るべからず。", pron:"칸케이샤 이가이 타치이루 베카라즈", ko:"관계자 외 출입 금지.", use:"✅ 표지", highlight:["べからず"]},
      {jp:"油断すべからず。", pron:"유단 스베카라즈", ko:"방심해서는 안 된다.", use:"✅ 표어", highlight:["べからず"]},
      {jp:"触るべからず。", pron:"사와루 베카라즈", ko:"만지지 말 것.", use:"✅ 금지", highlight:["べからず"]}
    ]
  },

  /* =======================
     limit: 한정/강조
  ======================= */
  {
    cat:"limit", tag:"한정/강조", title:"～に至るまで (…에 이르기까지)",
    desc:"범위가 매우 넓음을 강조",
    rule:"名詞 + <span class='hl'>に至るまで</span>",
    warn:"열거와 함께 등장하면 거의 정답 포인트.",
    extra:{ core:"<span class='x-badge'>범위</span> “~에 이르기까지”", situation:"폭넓은 포함", breakdown:"細部 + に至るまで", caution:"문어체", variation:"子どもから大人に至るまで。" },
    examples:[
      {jp:"細部に至るまで注意が必要だ。", pron:"사이부니 이타루마데 츄우이가 히츠요오다", ko:"세부에 이르기까지 주의가 필요하다.", use:"✅ 지침", highlight:["に至るまで"]},
      {jp:"材料から製法に至るまで公開された。", pron:"자이료오카라 세이호오니 이타루마데 코오카이사레타", ko:"재료부터 제조법까지 공개됐다.", use:"✅ 기사", highlight:["に至るまで"]},
      {jp:"子どもから大人に至るまで人気がある。", pron:"코도모카라 오토나니 이타루마데 닌키가 아루", ko:"아이부터 어른까지 인기 있다.", use:"✅ 범위", highlight:["に至るまで"]}
    ]
  },
  {
    cat:"limit", tag:"한정/강조", title:"～にして (…에다가/…이면서도)",
    desc:"딱 그 수준/그 시점 또는 ‘~이면서도’ 강조",
    rule:"名詞 + <span class='hl'>にして</span>",
    warn:"‘若くして成功’ 등 독해 빈출 콜로케이션.",
    extra:{ core:"<span class='x-badge'>강조</span> “~이면서도/…에 이르러서야”", situation:"강조·평가", breakdown:"若くして + 成功", caution:"문맥 의미 변화 주의", variation:"慎重にして大胆だ。" },
    examples:[
      {jp:"彼は若くして社長になった。", pron:"카레와 와카쿠시테 샤초오니 낫타", ko:"그는 젊은 나이에 사장이 되었다.", use:"✅ 평가", highlight:["にして"]},
      {jp:"慎重にして大胆だ。", pron:"신초오니시테 다이탄다", ko:"신중하면서도 대담하다.", use:"✅ 대조", highlight:["にして"]},
      {jp:"百年にして初めて実現した。", pron:"햐쿠넨니시테 하지메테 지츠겐시타", ko:"백 년 만에 처음 실현되었다.", use:"✅ 강조", highlight:["にして"]}
    ]
  },
  {
    cat:"limit", tag:"한정/강조", title:"～を限りに (…을 끝으로)",
    desc:"마지막을 기준으로 종료",
    rule:"名詞 + <span class='hl'>を限りに</span>",
    warn:"‘本日を限りに’ 초빈출.",
    extra:{ core:"<span class='x-badge'>종료</span> “~을 끝으로”", situation:"퇴임/중단/종료", breakdown:"今月を限りに + 終了", caution:"‘をもって’와 유사, ‘마지막’ 강조", variation:"今回を限りに終了します。" },
    examples:[
      {jp:"本日を限りに退任いたします。", pron:"혼지츠오 카기리니 타이닌이타시마스", ko:"금일을 끝으로 퇴임합니다.", use:"✅ 공지", highlight:["を限りに"]},
      {jp:"今月を限りにサービスは終了します。", pron:"콘게츠오 카기리니 사아비스와 슈우료오시마스", ko:"이번 달을 끝으로 서비스가 종료됩니다.", use:"✅ 안내", highlight:["を限りに"]},
      {jp:"今回を限りに出演はありません。", pron:"콘카이오 카기리니 슈츠엔와 아리마센", ko:"이번을 마지막으로 출연은 없습니다.", use:"✅ 발표", highlight:["を限りに"]}
    ]
  },

  /* =======================
     reason: 원인/결과
  ======================= */
  {
    cat:"reason", tag:"원인/결과", title:"～とあって (…이기 때문에/…이니까)",
    desc:"특별한 사정이라서(문어/설명)",
    rule:"普通形 + <span class='hl'>とあって</span>",
    warn:"‘특별함’이 전제된 이유. 기사체에 많음.",
    extra:{ core:"<span class='x-badge'>특별</span> “~인 만큼”", situation:"특별 이벤트/유명인", breakdown:"人気店だ + とあって + 行列", caution:"단순 원인(から)보다 강조", variation:"初日とあって混雑している。" },
    examples:[
      {jp:"人気店とあって、行列ができている。", pron:"닌키텐 토앗테 교오레츠가 데키테이루", ko:"인기 가게인 만큼 줄이 서 있다.", use:"✅ 기사", highlight:["とあって"]},
      {jp:"初日とあって会場は混雑していた。", pron:"쇼니치 토앗테 카이조오와 콘자츠시테이타", ko:"첫날인 만큼 행사장은 혼잡했다.", use:"✅ 이벤트", highlight:["とあって"]},
      {jp:"有名人が来るとあって報道陣が集まった。", pron:"유우메이진가 쿠루 토앗테 호오도오진가 아츠맛타", ko:"유명인이 온다기에 취재진이 모였다.", use:"✅ 뉴스", highlight:["とあって"]}
    ]
  },
  {
    cat:"reason", tag:"원인/결과", title:"～と相まって (…와 맞물려)",
    desc:"요인들이 결합해 결과가 확대",
    rule:"名詞 + <span class='hl'>と相まって</span>",
    warn:"분석/기사에서 ‘복합 요인’ 전개로 빈출.",
    extra:{ core:"<span class='x-badge'>복합</span> “~와 맞물려”", situation:"시너지/결합", breakdown:"円安 + と相まって + 輸出増", caution:"‘とともに’보다 ‘결합’", variation:"人気と相まって売上が伸びる。" },
    examples:[
      {jp:"円安と相まって、輸出が伸びた。", pron:"엔야스 토아이맛테 유슈츠가 노비타", ko:"엔저와 맞물려 수출이 늘었다.", use:"✅ 경제", highlight:["と相まって"]},
      {jp:"努力と才能が相まって成功した。", pron:"도료쿠토 사이노오가 아이맛테 세이코오시타", ko:"노력과 재능이 맞물려 성공했다.", use:"✅ 평가", highlight:["相まって"]},
      {jp:"好立地と相まって人気が高い。", pron:"코오릿치 토아이맛테 닌키가 타카이", ko:"좋은 입지와 맞물려 인기가 높다.", use:"✅ 설명", highlight:["と相まって"]}
    ]
  },
  {
    cat:"reason", tag:"원인/결과", title:"～いかんで / ～いかんによって (…에 따라 좌우)",
    desc:"결정 요인에 따라 결과가 달라짐(문어)",
    rule:"名詞 + <span class='hl'>いかんで</span> / <span class='hl'>いかんによって</span>",
    warn:"‘～いかん’은 공식 문서에서 매우 빈출.",
    extra:{ core:"<span class='x-badge'>좌우</span> “~여하에 달려”", situation:"조건이 결과 결정", breakdown:"対応いかんで + 変わる", caution:"‘次第’보다 격식", variation:"努力いかんで成功は決まる。" },
    examples:[
      {jp:"対応いかんで結果が大きく変わる。", pron:"타이오오 이칸데 켓카가 오오키쿠 카와루", ko:"대응 여하에 결과가 크게 달라진다.", use:"✅ 보고서", highlight:["いかんで"]},
      {jp:"本人の努力いかんによって決まる。", pron:"혼닌노 도료쿠 이칸니요옷테 키마루", ko:"본인의 노력 여하에 달려 있다.", use:"✅ 논설", highlight:["いかんによって"]},
      {jp:"天候いかんでは中止となる。", pron:"텐코오 이칸데와 츄우시토 나루", ko:"날씨 여하에 따라 중지된다.", use:"✅ 공지", highlight:["いかんでは"]}
    ]
  },
  {
    cat:"reason", tag:"원인/결과", title:"～にかかわる (…에 관계되다: 중대)",
    desc:"생명/명예 등 중대 문제",
    rule:"名詞 + <span class='hl'>にかかわる</span>",
    warn:"‘命にかかわる’ 고정 표현으로 특히 빈출.",
    extra:{ core:"<span class='x-badge'>중대</span> “~에 관련(중대)”", situation:"안전/명예/생사", breakdown:"命 + にかかわる", caution:"단순 ‘関係する’보다 강함", variation:"名誉にかかわる。" },
    examples:[
      {jp:"これは命にかかわる問題だ。", pron:"코레와 이노치니 카카와루 몬다이다", ko:"이건 생명과 관련된 문제다.", use:"✅ 경고", highlight:["にかかわる"]},
      {jp:"名誉にかかわる発言は控えるべきだ。", pron:"메이요니 카카와루 하츠겐와 히카에루베키다", ko:"명예에 관련된 발언은 삼가야 한다.", use:"✅ 논설", highlight:["にかかわる"]},
      {jp:"安全にかかわる欠陥が見つかった。", pron:"안젠니 카카와루 켓칸가 미츠캇타", ko:"안전에 관련된 결함이 발견됐다.", use:"✅ 기사", highlight:["にかかわる"]}
    ]
  },

  /* =======================
     time: 시간/전환
  ======================= */
  {
    cat:"time", tag:"시간/전환", title:"～そばから (…하자마자 또…)",
    desc:"바로 이어 반복(불만 뉘앙스)",
    rule:"動詞る + <span class='hl'>そばから</span>",
    warn:"‘해도 해도 또’ 반복 구조.",
    extra:{ core:"<span class='x-badge'>반복</span> “~하자마자 또”", situation:"정리/암기 무효", breakdown:"覚える + そばから + 忘れる", caution:"대체로 부정", variation:"掃除するそばから汚れる。" },
    examples:[
      {jp:"片付けるそばから散らかる。", pron:"카타즈케루 소바카라 치라카루", ko:"정리하자마자 어질러진다.", use:"✅ 반복", highlight:["そばから"]},
      {jp:"覚えるそばから忘れてしまう。", pron:"오보에루 소바카라 와스레테시마우", ko:"외우자마자 잊는다.", use:"✅ 한탄", highlight:["そばから"]},
      {jp:"掃除するそばから汚れる。", pron:"소오지스루 소바카라 요고레루", ko:"청소하자마자 더러워진다.", use:"✅ 반복", highlight:["そばから"]}
    ]
  },
  {
    cat:"time", tag:"시간/전환", title:"～や否や (…하자마자 곧)",
    desc:"즉시/동시 발생(문어)",
    rule:"動詞辞書形 + <span class='hl'>や否や</span>",
    warn:"서술/소설/기사에서 속도감 표현.",
    extra:{ core:"<span class='x-badge'>즉시</span> “~하자마자”", situation:"바로 행동/반응", breakdown:"見る + や否や + 走る", caution:"회화 거의 X", variation:"ベルが鳴るや否や飛び出した。" },
    examples:[
      {jp:"ベルが鳴るや否や、皆が走り出した。", pron:"베루가 나루야이나야 미나가 하시리다시타", ko:"벨이 울리자마자 모두 달려 나갔다.", use:"✅ 묘사", highlight:["や否や"]},
      {jp:"家に着くや否や、寝てしまった。", pron:"이에니 츠쿠야이나야 네테시맛타", ko:"집에 도착하자마자 잠들었다.", use:"✅ 즉시", highlight:["や否や"]},
      {jp:"彼は聞くや否や、顔色を変えた。", pron:"카레와 키쿠야이나야 카오이로오 카에타", ko:"그는 듣자마자 표정을 바꿨다.", use:"✅ 반응", highlight:["や否や"]}
    ]
  },
  {
    cat:"time", tag:"시간/전환", title:"～かと思いきや (…인 줄 알았더니)",
    desc:"예상 반전 전개",
    rule:"普通形 + <span class='hl'>かと思いきや</span>",
    warn:"독해에서 ‘반전’ 단서로 자주.",
    extra:{ core:"<span class='x-badge'>반전</span> “~인 줄 알았더니”", situation:"예상과 다른 결과", breakdown:"終わった + かと思いきや + 続く", caution:"연출/문어 느낌", variation:"簡単かと思いきや難しい。" },
    examples:[
      {jp:"終わったかと思いきや、まだ続きがあった。", pron:"오왓타 카토오모이키야 마다 츠즈키가 앗타", ko:"끝난 줄 알았더니 아직 이어졌다.", use:"✅ 반전", highlight:["かと思いきや"]},
      {jp:"簡単かと思いきや、意外と難しい。", pron:"칸탄 카토오모이키야 이가이토 무즈카시이", ko:"쉬운 줄 알았더니 의외로 어렵다.", use:"✅ 평가", highlight:["かと思いきや"]},
      {jp:"勝ったかと思いきや、最後に逆転された。", pron:"캇타 카토오모이키야 사이고니 갸쿠텐사레타", ko:"이긴 줄 알았더니 마지막에 역전당했다.", use:"✅ 전개", highlight:["かと思いきや"]}
    ]
  },

  /* =======================
     attitude: 태도/감정
  ======================= */
  {
    cat:"attitude", tag:"태도/감정", title:"～をよそに (…을 아랑곳하지 않고)",
    desc:"주변/상황을 신경 쓰지 않음",
    rule:"名詞 + <span class='hl'>をよそに</span>",
    warn:"비판/묘사 모두 가능(문어).",
    extra:{ core:"<span class='x-badge'>무시</span> “~을 아랑곳 않고”", situation:"주의/걱정 무시", breakdown:"心配 + をよそに + 続ける", caution:"비난 뉘앙스 가능", variation:"周囲の反対をよそに進めた。" },
    examples:[
      {jp:"親の心配をよそに、彼は旅に出た。", pron:"오야노 신파이오 요소니 카레와 타비니 데타", ko:"부모의 걱정을 아랑곳하지 않고 그는 여행을 떠났다.", use:"✅ 묘사", highlight:["をよそに"]},
      {jp:"周囲の反対をよそに計画を進めた。", pron:"슈우이노 한타이오 요소니 케에카쿠오 스스메타", ko:"주변 반대를 아랑곳하지 않고 계획을 밀어붙였다.", use:"✅ 비판", highlight:["をよそに"]},
      {jp:"注意をよそに、また同じことをした。", pron:"츄우이오 요소니 마타 오나지 코토오 시타", ko:"주의를 무시하고 또 같은 일을 했다.", use:"✅ 비판", highlight:["をよそに"]}
    ]
  },

  /* =======================
     formal: 문어/공식
  ======================= */
  {
    cat:"formal", tag:"문어/공식", title:"～に堪えない (…을 견딜 수 없다: 감정)",
    desc:"감정이 너무 커서 참기 어려움(문어)",
    rule:"名詞 + <span class='hl'>に堪えない</span>",
    warn:"격식 인사/논평에서 고급 감정 표현.",
    extra:{ core:"<span class='x-badge'>감정</span> “~을 견딜 수 없다”", situation:"감격/영광/유감", breakdown:"光栄 + に堪えない", caution:"회화 X", variation:"光栄に堪えません。" },
    examples:[
      {jp:"皆様のご支援に感謝の念に堪えません。", pron:"미나사마노 고시엔니 칸샤노 넨니 타에마센", ko:"지원에 감사의 마음을 금할 수 없습니다.", use:"✅ 공식", highlight:["に堪えません"]},
      {jp:"光栄に堪えません。", pron:"코오에에니 타에마센", ko:"영광스럽기 그지없습니다.", use:"✅ 인사", highlight:["に堪えません"]},
      {jp:"その結末には残念に堪えない。", pron:"소노 케츠마츠니와 잔넨니 타에나이", ko:"그 결말에는 유감스러움을 참을 수 없다.", use:"✅ 논평", highlight:["に堪えない"]}
    ]
  },
  {
    cat:"formal", tag:"문어/공식", title:"～にて (…에서/…으로)",
    desc:"장소/수단을 격식 있게 표시",
    rule:"名詞 + <span class='hl'>にて</span>",
    warn:"안내문/메일 ‘会場にて/書面にて’ 빈출.",
    extra:{ core:"<span class='x-badge'>격식</span> “~에서/으로”", situation:"공지/문서", breakdown:"会場 + にて + 開催", caution:"회화 ‘で’의 문어", variation:"書面にてご連絡。" },
    examples:[
      {jp:"受付は一階ロビーにて行います。", pron:"우케츠케와 잇카이 로비이니테 오코나이마스", ko:"접수는 1층 로비에서 합니다.", use:"✅ 안내", highlight:["にて"]},
      {jp:"書面にてご連絡いたします。", pron:"쇼멘니테 고렌라쿠이타시마스", ko:"서면으로 연락드리겠습니다.", use:"✅ 업무", highlight:["にて"]},
      {jp:"会場にてお待ちしております。", pron:"카이조오니테 오마치시테오리마스", ko:"행사장에서 기다리겠습니다.", use:"✅ 공지", highlight:["にて"]}
    ]
  },
  {
    cat:"formal", tag:"문어/공식", title:"～の段 (…의 건/…의 항목)",
    desc:"격식 있는 공지·문서 용어",
    rule:"名詞 + <span class='hl'>の段</span>",
    warn:"비즈니스 메일/공지에 흔함.",
    extra:{ core:"<span class='x-badge'>문서</span> “~의 건”", situation:"공식 연락", breakdown:"変更 + の段 + 連絡", caution:"회화 X", variation:"下記の段、ご確認。" },
    examples:[
      {jp:"日程変更の段、ご連絡いたします。", pron:"닛테이 헨코오노 단 고렌라쿠이타시마스", ko:"일정 변경 건으로 연락드립니다.", use:"✅ 메일", highlight:["の段"]},
      {jp:"お詫びの段、申し上げます。", pron:"오와비노 단 모오시아게마스", ko:"사과의 말씀 드립니다.", use:"✅ 공식", highlight:["の段"]},
      {jp:"詳細は別紙の段をご参照ください。", pron:"쇼오사이와 벳시노 단오 고산쇼오쿠다사이", ko:"상세는 별지를 참조해 주세요.", use:"✅ 문서", highlight:["の段"]}
    ]
  },

  /* =======================
     pattern: 관용 패턴
  ======================= */
  {
    cat:"pattern", tag:"관용 패턴", title:"～にかたくない (쉽게 …할 수 있다)",
    desc:"상상/예측이 어렵지 않다(문어)",
    rule:"動詞辞書形 + のは + <span class='hl'>かたくない</span>",
    warn:"논설/분석문에서 빈출.",
    extra:{ core:"<span class='x-badge'>추정</span> “~하기 어렵지 않다”", situation:"결과/감정 짐작", breakdown:"想像する + のは + かたくない", caution:"회화보다 문어", variation:"想像にかたくない。" },
    examples:[
      {jp:"彼が怒るのは想像にかたくない。", pron:"카레가 오코루노와 소오조오니 카타쿠나이", ko:"그가 화낼 것은 쉽게 상상할 수 있다.", use:"✅ 분석", highlight:["にかたくない"]},
      {jp:"混乱が起こるのは予想にかたくない。", pron:"콘란가 오코루노와 요소오니 카타쿠나이", ko:"혼란이 생길 것은 예상하기 어렵지 않다.", use:"✅ 전망", highlight:["にかたくない"]},
      {jp:"彼女が落ち込むのは理解にかたくない。", pron:"카노죠가 오치코무노와 리카이니 카타쿠나이", ko:"그녀가 낙담할 것은 이해하기 어렵지 않다.", use:"✅ 해석", highlight:["にかたくない"]}
    ]
  },
  {
    cat:"pattern", tag:"관용 패턴", title:"～いかんにかかわらず (…와 상관없이)",
    desc:"사유/조건 불문(문어/규정)",
    rule:"名詞 + <span class='hl'>いかんにかかわらず</span>",
    warn:"규정/요강에서 ‘사유 여하 불문’로 빈출.",
    extra:{ core:"<span class='x-badge'>불문</span> “~와 상관없이”", situation:"예외 없이 적용", breakdown:"理由いかんにかかわらず + 適用", caution:"‘にかかわらず’보다 격식", variation:"理由いかんにかかわらず返金不可。" },
    examples:[
      {jp:"理由いかんにかかわらず、返金できません。", pron:"리유우 이칸니 카카와라즈 헨킨데키마센", ko:"사유 불문 환불 불가.", use:"✅ 규정", highlight:["いかんにかかわらず"]},
      {jp:"年齢いかんにかかわらず参加可能。", pron:"넨레이 이칸니 카카와라즈 산카카노오", ko:"연령 무관 참가 가능.", use:"✅ 모집", highlight:["いかんにかかわらず"]},
      {jp:"天候いかんにかかわらず実施する。", pron:"텐코오 이칸니 카카와라즈 지ッ시스루", ko:"날씨 상관없이 실시한다.", use:"✅ 공지", highlight:["いかんにかかわらず"]}
    ]
  },
  {
    cat:"pattern", tag:"관용 패턴", title:"～を問わず (…을 불문하고)",
    desc:"A/B 구분 없이(문어)",
    rule:"名詞 + <span class='hl'>を問わず</span>",
    warn:"‘年齢を問わず’ 초빈출.",
    extra:{ core:"<span class='x-badge'>불문</span> “~에 상관없이”", situation:"모집/규정", breakdown:"経験を問わず + 採用", caution:"문어", variation:"男女を問わず。" },
    examples:[
      {jp:"年齢を問わず応募できます。", pron:"넨레이오 토와즈 오오보데키마스", ko:"연령 불문 지원 가능.", use:"✅ 모집", highlight:["を問わず"]},
      {jp:"経験を問わず採用します。", pron:"케이켄오 토와즈 사이요오시마스", ko:"경력 불문 채용.", use:"✅ 공고", highlight:["を問わず"]},
      {jp:"国籍を問わず参加可能。", pron:"코쿠세키오 토와즈 산카카노오", ko:"국적 불문 참가 가능.", use:"✅ 안내", highlight:["を問わず"]}
    ]
  },
  {
    cat:"pattern", tag:"관용 패턴", title:"～ずにはおかない (반드시 …하게 만든다)",
    desc:"상황이 사람을 어떤 행동/감정으로 유발",
    rule:"動詞ない形 + <span class='hl'>ずにはおかない</span>",
    warn:"‘～させずにはおかない’도 세트로 빈출.",
    extra:{ core:"<span class='x-badge'>유발</span> “~하지 않을 수 없게 하다”", situation:"감동/행동 유발", breakdown:"人を感動させずにはおかない", caution:"문어/평론체", variation:"涙を誘わずにはおかない。" },
    examples:[
      {jp:"その映画は観客を感動させずにはおかない。", pron:"소노 에이가와 칸캬쿠오 칸도오사세즈니와오카나이", ko:"그 영화는 관객을 반드시 감동시킨다.", use:"✅ 평론", highlight:["ずにはおかない"]},
      {jp:"彼の言葉は人を奮い立たせずにはおかない。", pron:"카레노 코토바와 히토오 후루이타타세즈니와오카나이", ko:"그의 말은 사람을 분발하게 만든다.", use:"✅ 평가", highlight:["ずにはおかない"]},
      {jp:"その光景は涙を誘わずにはおかない。", pron:"소노 코오케에와 나미다오 사소와즈니와오카나이", ko:"그 광경은 눈물을 자아내지 않을 수 없다.", use:"✅ 묘사", highlight:["ずにはおかない"]}
    ]
  },
  {
    cat:"pattern", tag:"관용 패턴", title:"～てやまない (간절히 …하다)",
    desc:"기원/바람을 강하게 표현(문어)",
    rule:"動詞て形 + <span class='hl'>やまない</span>",
    warn:"‘願ってやまない/祈ってやまない’ 고정 빈출.",
    extra:{ core:"<span class='x-badge'>기원</span> “~하기를 간절히 바란다”", situation:"성명/인사", breakdown:"回復を願ってやまない", caution:"회화 X", variation:"成功を祈ってやまない。" },
    examples:[
      {jp:"皆様のご健康を祈ってやみません。", pron:"미나사마노 고켄코오오 이놋테 야미마센", ko:"여러분의 건강을 진심으로 기원합니다.", use:"✅ 공식", highlight:["てやみません"]},
      {jp:"一日も早い復旧を願ってやまない。", pron:"이치니치모 하야이 훗큐우오 네갓테 야마나이", ko:"하루빨리 복구되길 간절히 바란다.", use:"✅ 성명", highlight:["てやまない"]},
      {jp:"成功を信じてやまない。", pron:"세이코오오 신지테 야마나이", ko:"성공을 굳게 믿는다.", use:"✅ 문어", highlight:["てやまない"]}
    ]
  },

  /* ==========================================================
     ✅ 여기부터 80개를 채우는 “추가 40개”
     - N1 핵심만 엄선 (독해/문어/기사체 빈출)
========================================================== */

  /* --- contrast/논리 --- */
  {
    cat:"contrast", tag:"대조/양보", title:"～にひきかえ (…에 비해)",
    desc:"대조 비교(문어)",
    rule:"名詞/普通形 + <span class='hl'>にひきかえ</span>",
    warn:"논설에서 비교 구조로 빈출.",
    extra:{ core:"<span class='x-badge'>비교</span> “~에 비해”", situation:"A와 B 대비", breakdown:"兄にひきかえ + 弟は", caution:"문어", variation:"昔にひきかえ今は…" },
    examples:[
      {jp:"兄にひきかえ、弟は内向的だ。", pron:"아니니 히키카에 오토오토와 나이코오테키다", ko:"형에 비해 동생은 내성적이다.", use:"✅ 비교", highlight:["にひきかえ"]},
      {jp:"昔にひきかえ、今は便利になった。", pron:"무카시니 히키카에 이마와 벤리니 낫타", ko:"옛날에 비해 지금은 편리해졌다.", use:"✅ 설명", highlight:["にひきかえ"]},
      {jp:"予想にひきかえ、結果は悪かった。", pron:"요소오니 히키카에 켓카와 와루캇타", ko:"예상에 비해 결과는 나빴다.", use:"✅ 평가", highlight:["にひきかえ"]}
    ]
  },
  {
    cat:"contrast", tag:"대조/양보", title:"～といえなくもない (…라고 할 수도 있다)",
    desc:"완전한 단정은 피하고 완곡하게 인정",
    rule:"普通形 + <span class='hl'>といえなくもない</span>",
    warn:"‘완곡한 평가’로 논평에서 자주.",
    extra:{ core:"<span class='x-badge'>완곡</span> “~라고도 할 수”", situation:"평가/판단을 누그러뜨림", breakdown:"成功だ + といえなくもない", caution:"강한 단정 피하기", variation:"正しいといえなくもない。" },
    examples:[
      {jp:"成功といえなくもないが、課題は残る。", pron:"세이코오 토이에나쿠모나이가 카다이와 노코루", ko:"성공이라고 할 수도 있지만 과제는 남는다.", use:"✅ 논설", highlight:["といえなくもない"]},
      {jp:"合理的といえなくもない。", pron:"고오리테키 토이에나쿠모나이", ko:"합리적이라고도 할 수 있다.", use:"✅ 평가", highlight:["といえなくもない"]},
      {jp:"必要といえなくもないが急ぎではない。", pron:"히츠요오 토이에나쿠모나이가 이소기데와 나이", ko:"필요하다고 할 수도 있지만 급한 건 아니다.", use:"✅ 절제", highlight:["といえなくもない"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～を端緒に (…을 단서/실마리로)",
    desc:"문제/수사가 전개되는 출발점(문어)",
    rule:"名詞 + <span class='hl'>を端緒に</span>",
    warn:"논설·기사에서 ‘실마리’로 자주.",
    extra:{ core:"<span class='x-badge'>실마리</span> “~을 단서로”", situation:"수사/문제 제기", breakdown:"発言を端緒に + 議論", caution:"문어", variation:"疑惑を端緒に捜査が進む。" },
    examples:[
      {jp:"一言を端緒に議論が広がった。", pron:"히토코토오 탄쇼니 기론가 히로갓타", ko:"한마디를 계기로(단서로) 논의가 퍼졌다.", use:"✅ 전개", highlight:["を端緒に"]},
      {jp:"不正疑惑を端緒に調査が始まった。", pron:"후세이 기와쿠오 탄쇼니 초오사가 하지맛타", ko:"부정 의혹을 단서로 조사가 시작됐다.", use:"✅ 기사", highlight:["を端緒に"]},
      {jp:"小さなミスを端緒に問題が表面化した。", pron:"치이사나 미스오 탄쇼니 몬다이가 효오멘카시타", ko:"작은 실수를 단서로 문제가 표면화했다.", use:"✅ 논설", highlight:["を端緒に"]}
    ]
  },

  /* --- reason/결과 --- */
  {
    cat:"reason", tag:"원인/결과", title:"～とあいまって (…와 더불어/맞물려)",
    desc:"(=と相まって) 복합 요인 결합",
    rule:"名詞 + <span class='hl'>とあいまって</span>",
    warn:"표기 흔들림(相まって/あいまって) 둘 다 대비.",
    extra:{ core:"<span class='x-badge'>복합</span> “맞물려”", situation:"시너지", breakdown:"人気 + とあいまって", caution:"독해에서 표기 주의", variation:"需要増とあいまって価格が上がる。" },
    examples:[
      {jp:"需要増とあいまって価格が上がった。", pron:"쥬요오조오 토아이맛테 카카쿠가 아갓타", ko:"수요 증가와 맞물려 가격이 올랐다.", use:"✅ 경제", highlight:["とあいまって"]},
      {jp:"努力とあいまって成果が出た。", pron:"도료쿠 토아이맛테 세이카가 데타", ko:"노력과 맞물려 성과가 났다.", use:"✅ 평가", highlight:["とあいまって"]},
      {jp:"環境の変化とあいまって意識も変わった。", pron:"칸쿄오노 헨카 토아이맛테 이시키모 카왓타", ko:"환경 변화와 맞물려 의식도 바뀌었다.", use:"✅ 설명", highlight:["とあいまって"]}
    ]
  },

  /* --- limit/범위 --- */
  {
    cat:"limit", tag:"한정/강조", title:"～にわたって (…에 걸쳐)",
    desc:"기간/범위가 넓음(문어)",
    rule:"名詞 + <span class='hl'>にわたって</span>",
    warn:"기사/보고서에서 기간·영역 표현으로 빈출.",
    extra:{ core:"<span class='x-badge'>범위</span> “~에 걸쳐”", situation:"기간/영역", breakdown:"全国にわたって + 影響", caution:"‘にわたり’(연체)도 같이", variation:"長年にわたる研究。" },
    examples:[
      {jp:"影響は全国にわたって広がった。", pron:"에이쿄오와 젠코쿠니 와탓테 히로갓타", ko:"영향은 전국에 걸쳐 퍼졌다.", use:"✅ 기사", highlight:["にわたって"]},
      {jp:"長年にわたる研究の成果だ。", pron:"나가넨니 와타루 켄큐우노 세이카다", ko:"수년에 걸친 연구의 성과다.", use:"✅ 논설", highlight:["にわたる"]},
      {jp:"数日にわたって調査が行われた。", pron:"스우지츠니 와탓테 초오사가 오코나와레타", ko:"며칠에 걸쳐 조사가 진행됐다.", use:"✅ 기사", highlight:["にわたって"]}
    ]
  },

  /* --- formal/pattern --- */
  {
    cat:"formal", tag:"문어/공식", title:"～をもってしても (…으로도)",
    desc:"그 수단/조건으로도 어렵다(문어)",
    rule:"名詞 + <span class='hl'>をもってしても</span>",
    warn:"‘それをもってしても’ 형태로 논설 빈출.",
    extra:{ core:"<span class='x-badge'>한계</span> “~으로도(부족)”", situation:"수단이 있어도 불가능", breakdown:"努力をもってしても + 無理", caution:"강한 문어", variation:"最新技術をもってしても難しい。" },
    examples:[
      {jp:"最新技術をもってしても解決できない。", pron:"사이신 기주츠오 못테시테모 카이케츠데키나이", ko:"최신 기술로도 해결할 수 없다.", use:"✅ 논설", highlight:["をもってしても"]},
      {jp:"彼の力をもってしても不可能だ。", pron:"카레노 치카라오 못테시테모 후카노오다", ko:"그의 힘으로도 불가능하다.", use:"✅ 평가", highlight:["をもってしても"]},
      {jp:"努力をもってしても間に合わない。", pron:"도료쿠오 못테시테모 마니아와나이", ko:"노력으로도 늦는다(맞추기 어렵다).", use:"✅ 한계", highlight:["をもってしても"]}
    ]
  },

  /* ==========================================================
     ✅ 남은 30개: N1 핵심 표현들 (짧고 정확히)
     - 아래부터는 “빈출 최상급” 위주로 쭉 추가
========================================================== */

  {
    cat:"pattern", tag:"관용 패턴", title:"～ずして (…하지 않고서)",
    desc:"…하지 않고서는/…없이(문어)",
    rule:"動詞ない形 + ずして",
    warn:"‘～ずして～ない’ 형태로 자주.",
    extra:{ core:"<span class='x-badge'>부정</span> “~하지 않고서는”", situation:"불가능 강조", breakdown:"努力せずして成功できない", caution:"문어체", variation:"学ばずして知ることなし。" },
    examples:[
      {jp:"努力せずして成功はない。", pron:"도료쿠세즈시테 세이코오와 나이", ko:"노력 없이는 성공이 없다.", use:"✅ 격문", highlight:["ずして"]},
      {jp:"確認せずして結論は出せない。", pron:"카쿠닌세즈시테 케츠론와 다시에나이", ko:"확인 없이 결론을 낼 수 없다.", use:"✅ 논설", highlight:["ずして"]},
      {jp:"準備せずして臨むべからず。", pron:"준비세즈시테 노조무베카라즈", ko:"준비 없이 임해서는 안 된다.", use:"✅ 문어", highlight:["ずして"]}
    ]
  },
  {
    cat:"pattern", tag:"관용 패턴", title:"～をも辞さない (…도 사양하지 않다/마다하지 않다)",
    desc:"목표 위해 희생도 각오(문어)",
    rule:"名詞 + <span class='hl'>をも辞さない</span>",
    warn:"강한 결의/각오 표현(논설/기사).",
    extra:{ core:"<span class='x-badge'>각오</span> “~도 마다않다”", situation:"위험/비난 감수", breakdown:"批判をも辞さない", caution:"강한 문어", variation:"命をも辞さない覚悟。" },
    examples:[
      {jp:"改革のためなら批判をも辞さない。", pron:"카이카쿠노 타메나라 히한오모 지사나이", ko:"개혁을 위해서라면 비판도 마다하지 않는다.", use:"✅ 결의", highlight:["をも辞さない"]},
      {jp:"真実のためには犠牲をも辞さない。", pron:"신지츠노 타메니와 기세에오모 지사나이", ko:"진실을 위해서는 희생도 마다하지 않는다.", use:"✅ 문어", highlight:["をも辞さない"]},
      {jp:"彼は危険をも辞さず現場に入った。", pron:"카레와 키켄오모 지사즈 겐바니 하잇타", ko:"그는 위험도 마다하지 않고 현장에 들어갔다.", use:"✅ 기사", highlight:["をも辞さず"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～に照らして (…에 비추어)",
    desc:"기준에照らして 판단(문어)",
    rule:"名詞 + <span class='hl'>に照らして</span>",
    warn:"규정/사실/전례를 기준으로 판정할 때.",
    extra:{ core:"<span class='x-badge'>기준</span> “~에 비추어”", situation:"규정/사실 기반 판단", breakdown:"規定に照らして + 判断", caution:"‘に照らすと’도 자주", variation:"前例に照らして妥当だ。" },
    examples:[
      {jp:"規定に照らして判断する。", pron:"키테에니 테라시테 한단스루", ko:"규정에 비추어 판단한다.", use:"✅ 업무", highlight:["に照らして"]},
      {jp:"事実に照らすと不自然だ。", pron:"지지츠니 테라스토 후시젠다", ko:"사실에 비추면 부자연스럽다.", use:"✅ 논설", highlight:["に照らすと"]},
      {jp:"前例に照らしても例外ではない。", pron:"젠레이니 테라시테모 레이가이데와나이", ko:"전례에 비추어도 예외가 아니다.", use:"✅ 판단", highlight:["に照らしても"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～に則って (…에 따라/…에 입각해)",
    desc:"규칙/원칙 준수(문어)",
    rule:"名詞 + <span class='hl'>に則って</span>",
    warn:"규정 준수 뉘앙스 강함.",
    extra:{ core:"<span class='x-badge'>준수</span> “~에 따라”", situation:"규칙/절차 준수", breakdown:"規則に則って + 行う", caution:"‘に基づいて’와 유사하나 ‘준수’ 강조", variation:"手順に則って作業する。" },
    examples:[
      {jp:"規則に則って処理します。", pron:"키소쿠니 놋톳테 쇼리시마스", ko:"규칙에 따라 처리합니다.", use:"✅ 업무", highlight:["に則って"]},
      {jp:"手順に則って作業を進める。", pron:"테준니 놋톳테 사교오오 스스메루", ko:"절차에 따라 작업을 진행한다.", use:"✅ 절차", highlight:["に則って"]},
      {jp:"原則に則った運用が必要だ。", pron:"겐소쿠니 놋톳타 운요오가 히츠요오다", ko:"원칙에 따른 운영이 필요하다.", use:"✅ 논설", highlight:["に則った"]}
    ]
  },
  {
    cat:"pattern", tag:"관용 패턴", title:"～を禁じ得ない / ～に堪えない (감정 문어 쌍)",
    desc:"감정 문어 표현 세트(비교 학습용)",
    rule:"名詞 + を禁じ得ない / 名詞 + に堪えない",
    warn:"둘 다 회화 X. ‘논평/인사’에서 등장.",
    extra:{ core:"<span class='x-badge'>세트</span> “참을 수 없다”", situation:"논평/성명", breakdown:"怒りを禁じ得ない / 光栄に堪えない", caution:"뉘앙스 차이: 禁じ得ない(금할 수 없음), 堪えない(견딜 수 없음)", variation:"涙を禁じ得ない／感謝に堪えない。" },
    examples:[
      {jp:"怒りを禁じ得ない。", pron:"이카리오 킨지에나이", ko:"분노를 금할 수 없다.", use:"✅ 논평", highlight:["禁じ得ない"]},
      {jp:"光栄に堪えません。", pron:"코오에에니 타에마센", ko:"영광스럽기 그지없습니다.", use:"✅ 인사", highlight:["堪えません"]},
      {jp:"同情を禁じ得ない。", pron:"도오조오오 킨지에나이", ko:"동정을 금할 수 없다.", use:"✅ 기사", highlight:["禁じ得ない"]}
    ]
  },

  /* ==========================================================
     ✅ 마지막 20개(핵심) — N1 빈출 고정 라인업
     (짧게 넣되 실제 시험에 나오는 표현들)
========================================================== */

  {
    cat:"pattern", tag:"관용 패턴", title:"～を顧みず (…을 돌보지 않고/아랑곳하지 않고)",
    desc:"자신의 사정을 무시하고(문어)",
    rule:"名詞 + <span class='hl'>を顧みず</span>",
    warn:"희생/헌신 묘사에 자주.",
    extra:{ core:"<span class='x-badge'>무시</span> “~을 돌보지 않고”", situation:"자기희생", breakdown:"危険を顧みず + 行動", caution:"문어", variation:"身の危険を顧みず。" },
    examples:[
      {jp:"身の危険を顧みず救助した。", pron:"미노 키켄오 카에리미즈 큐우조시타", ko:"신변의 위험을 돌보지 않고 구조했다.", use:"✅ 기사", highlight:["を顧みず"]},
      {jp:"反対を顧みず突き進んだ。", pron:"한타이오 카에리미즈 츠키스슨다", ko:"반대를 아랑곳하지 않고 밀고 나갔다.", use:"✅ 묘사", highlight:["を顧みず"]},
      {jp:"結果を顧みず発言した。", pron:"켓카오 카에리미즈 하츠겐시타", ko:"결과를 생각하지 않고 발언했다.", use:"✅ 비판", highlight:["を顧みず"]}
    ]
  },
  {
    cat:"formal", tag:"문어/공식", title:"～に際して (…에 즈음하여)",
    desc:"공식 문어 ‘~할 때’",
    rule:"名詞/動詞辞書形 + <span class='hl'>に際して</span>",
    warn:"안내/규정/문서에 초빈출.",
    extra:{ core:"<span class='x-badge'>시점</span> “~에 즈음하여”", situation:"입학/출발/착수", breakdown:"出発に際して + 確認", caution:"격식", variation:"契約に際してご確認ください。" },
    examples:[
      {jp:"出発に際して、身分証を確認します。", pron:"슈파츠니 사이시테 미분쇼오오 카쿠닌시마스", ko:"출발에 즈음하여 신분증을 확인합니다.", use:"✅ 안내", highlight:["に際して"]},
      {jp:"入学に際して手続きが必要だ。", pron:"뉴우가쿠니 사이시테 테츠즈키가 히츠요오다", ko:"입학에 즈음하여 절차가 필요하다.", use:"✅ 규정", highlight:["に際して"]},
      {jp:"利用に際しての注意事項。", pron:"리요오니 사이시테노 츄우이 지코오", ko:"이용 시 주의사항.", use:"✅ 문서", highlight:["に際して"]}
    ]
  },

  /* ---- 아래 18개는 “틀만 유지 + 실전빈출”로 빠르게 추가 ---- */
  {
    cat:"pattern", tag:"관용 패턴", title:"～いかんによらず (…와 관계없이)",
    desc:"여하를 불문(문어)",
    rule:"名詞 + <span class='hl'>いかんによらず</span>",
    warn:"규정 문장에 자주(=いかんにかかわらず).",
    extra:{ core:"<span class='x-badge'>불문</span>", situation:"규정/약관", breakdown:"理由いかんによらず", caution:"문어", variation:"理由いかんによらず無効。" },
    examples:[
      {jp:"理由いかんによらず無効とする。", pron:"리유우 이칸니요라즈 무코오토스루", ko:"사유 불문 무효로 한다.", use:"✅ 규정", highlight:["いかんによらず"]},
      {jp:"成績いかんによらず一律で行う。", pron:"세이세키 이칸니요라즈 이치리츠데 오코나우", ko:"성적과 무관하게 일률적으로 시행한다.", use:"✅ 공지", highlight:["いかんによらず"]},
      {jp:"事情いかんによらず延期しない。", pron:"지죠오 이칸니요라즈 엔키시나이", ko:"사정 불문 연기하지 않는다.", use:"✅ 방침", highlight:["いかんによらず"]}
    ]
  },
  {
    cat:"logic", tag:"논리/전개", title:"～を機に (…을 계기로)",
    desc:"전환점(문어/공식)",
    rule:"名詞 + <span class='hl'>を機に</span>",
    warn:"N2에서도 나오지만 N1 독해에서도 ‘전환점’으로 빈출.",
    extra:{ core:"<span class='x-badge'>계기</span>", situation:"변화 시작", breakdown:"就職を機に + 引っ越す", caution:"문어", variation:"これを機に見直す。" },
    examples:[
      {jp:"これを機に制度を見直す。", pron:"코레오 키니 세이도오 미나오스", ko:"이를 계기로 제도를 재검토한다.", use:"✅ 문서", highlight:["を機に"]},
      {jp:"退職を機に起業した。", pron:"타이쇼쿠오 키니 키교오시타", ko:"퇴직을 계기로 창업했다.", use:"✅ 전환", highlight:["を機に"]},
      {jp:"受賞を機に注目が集まった。", pron:"쥬쇼오오 키니 츄우모쿠가 아츠맛타", ko:"수상을 계기로 주목이 모였다.", use:"✅ 기사", highlight:["を機に"]}
    ]
  },

  /* ✅ 최종 채움(16개) */
  {
    cat:"pattern", tag:"관용 패턴", title:"～に足りる / ～に足りない (가치/부족)",
    desc:"평가 문어 세트",
    rule:"動詞辞書形 + に足る / に足りない",
    warn:"N1 독해에서 평가문장 빈출.",
    extra:{ core:"<span class='x-badge'>평가</span>", situation:"칭찬/반박", breakdown:"検討に足る / 説明に足りない", caution:"문어", variation:"称賛に足る成果。" },
    examples:[
      {jp:"検討に足る案だ。", pron:"켄토오니 타루 안다", ko:"검토할 만한 안이다.", use:"✅ 평가", highlight:["に足る"]},
      {jp:"根拠は説明に足りない。", pron:"콘쿄와 세츠메에니 타리나이", ko:"근거는 설명으로 부족하다.", use:"✅ 반박", highlight:["に足りない"]},
      {jp:"信頼に足る人物だ。", pron:"신라이니 타루 진부츠다", ko:"신뢰할 만한 인물이다.", use:"✅ 추천", highlight:["に足る"]}
    ]
  },

{
  cat:"logic", tag:"논리/전개", title:"～をもってしても (…으로도)",
  desc:"그 수단/조건으로도 어렵다(문어)",
  rule:"名詞 + <span class='hl'>をもってしても</span>",
  warn:"‘それをもってしても’ 형태로 논설 빈출.",
  extra:{ core:"<span class='x-badge'>한계</span> “~으로도(부족)”", situation:"수단이 있어도 불가능", breakdown:"最新技術をもってしても + 難しい", caution:"강한 문어", variation:"彼の力をもってしても無理だ。" },
  examples:[
    {jp:"最新技術をもってしても解決できない。", pron:"사이신 기주츠오 못테시테모 카이케츠데키나이", ko:"최신 기술로도 해결할 수 없다.", use:"✅ 논설", highlight:["をもってしても"]},
    {jp:"彼の力をもってしても不可能だ。", pron:"카레노 치카라오 못테시테모 후카노오다", ko:"그의 힘으로도 불가능하다.", use:"✅ 평가", highlight:["をもってしても"]},
    {jp:"努力をもってしても間に合わない。", pron:"도료쿠오 못테시테모 마니아와나이", ko:"노력으로도 (기한에) 맞출 수 없다.", use:"✅ 한계", highlight:["をもってしても"]}
  ]
},
{
  cat:"logic", tag:"논리/전개", title:"～を踏まえて (…을 바탕으로/고려하여)",
  desc:"앞의 사실을 반영해 결론",
  rule:"名詞 + <span class='hl'>を踏まえて</span>",
  warn:"보고서/논설에서 ‘근거→결론’ 전개 핵심.",
  extra:{ core:"<span class='x-badge'>반영</span> “~을 바탕으로”", situation:"데이터/상황 반영", breakdown:"調査結果を踏まえて + 決定", caution:"‘基づく’보다 ‘고려/반영’", variation:"状況を踏まえた判断。" },
  examples:[
    {jp:"調査結果を踏まえて方針を決める。", pron:"초오사 켓카오 후마에테 호오신오 키메루", ko:"조사 결과를 바탕으로 방침을 정한다.", use:"✅ 보고서", highlight:["を踏まえて"]},
    {jp:"現状を踏まえた上で議論すべきだ。", pron:"겐죠오오 후마에타 우에데 기론스베키다", ko:"현황을 고려한 뒤 논의해야 한다.", use:"✅ 논설", highlight:["踏まえた"]},
    {jp:"実績を踏まえて評価します。", pron:"짓세키오 후마에테 효오카시마스", ko:"실적을 반영해 평가합니다.", use:"✅ 업무", highlight:["を踏まえて"]}
  ]
},
{
  cat:"logic", tag:"논리/전개", title:"～に即して (…에 즉하여)",
  desc:"실태/기준에 맞춰 판단(문어)",
  rule:"名詞 + <span class='hl'>に即して</span>",
  warn:"‘現状に即して’ 고정으로 빈출.",
  extra:{ core:"<span class='x-badge'>기준</span> “~에 맞춰”", situation:"현실/규정에 맞게", breakdown:"実態に即して + 対応", caution:"‘基づく’보다 ‘실태 맞춤’", variation:"実情に即した対策。" },
  examples:[
    {jp:"現状に即して対応を見直す。", pron:"겐죠오니 즉시테 타이오오오 미나오스", ko:"현황에 맞춰 대응을 재검토한다.", use:"✅ 보고서", highlight:["に即して"]},
    {jp:"実態に即した制度が必要だ。", pron:"짓타이니 즉시타 세이도가 히츠요오다", ko:"실태에 맞는 제도가 필요하다.", use:"✅ 논설", highlight:["に即した"]},
    {jp:"規定に即して処理します。", pron:"키테에니 즉시테 쇼리시마스", ko:"규정에 맞춰 처리합니다.", use:"✅ 업무", highlight:["に即して"]}
  ]
},
{
  cat:"logic", tag:"논리/전개", title:"～に照らして (…에 비추어)",
  desc:"기준/사실에照らして 판단",
  rule:"名詞 + <span class='hl'>に照らして</span>",
  warn:"규정/사실/전례를 기준으로 판정할 때.",
  extra:{ core:"<span class='x-badge'>기준</span> “~에 비추어”", situation:"규정/사실 기반 판단", breakdown:"規定に照らして + 判断", caution:"‘に照らすと’도 자주", variation:"前例に照らして妥当だ。" },
  examples:[
    {jp:"規定に照らして判断する。", pron:"키테에니 테라시테 한단스루", ko:"규정에 비추어 판단한다.", use:"✅ 업무", highlight:["に照らして"]},
    {jp:"事実に照らすと不自然だ。", pron:"지지츠니 테라스토 후시젠다", ko:"사실에 비추면 부자연스럽다.", use:"✅ 논설", highlight:["に照らすと"]},
    {jp:"前例に照らしても例外ではない。", pron:"젠레이니 테라시테모 레이가이데와나이", ko:"전례에 비추어도 예외가 아니다.", use:"✅ 판단", highlight:["に照らしても"]}
  ]
},
{
  cat:"logic", tag:"논리/전개", title:"～に則って (…에 따라/…에 입각해)",
  desc:"규칙/원칙 준수(문어)",
  rule:"名詞 + <span class='hl'>に則って</span>",
  warn:"‘준수’ 뉘앙스가 강함.",
  extra:{ core:"<span class='x-badge'>준수</span> “~에 따라”", situation:"규칙/절차 준수", breakdown:"手順に則って + 進める", caution:"‘基づく’와 유사, 준수 강조", variation:"原則に則った運用。" },
  examples:[
    {jp:"規則に則って処理します。", pron:"키소쿠니 놋톳테 쇼리시마스", ko:"규칙에 따라 처리합니다.", use:"✅ 업무", highlight:["に則って"]},
    {jp:"手順に則って作業を進める。", pron:"테준니 놋톳테 사교오오 스스메루", ko:"절차에 따라 작업을 진행한다.", use:"✅ 절차", highlight:["に則って"]},
    {jp:"原則に則った運用が必要だ。", pron:"겐소쿠니 놋톳타 운요오가 히츠요오다", ko:"원칙에 따른 운영이 필요하다.", use:"✅ 논설", highlight:["に則った"]}
  ]
},
{
  cat:"logic", tag:"논리/전개", title:"～を皮切りに (…을 시작으로)",
  desc:"연쇄적으로 이어지는 전개(문어)",
  rule:"名詞 + <span class='hl'>を皮切りに</span>",
  warn:"연속 발표/투어/시리즈 전개에 자주.",
  extra:{ core:"<span class='x-badge'>전개</span> “~을 시작으로”", situation:"연속 전개", breakdown:"東京公演を皮切りに + 全国へ", caution:"‘きっかけ’보다 ‘연쇄’ 강조", variation:"第一弾を皮切りに続々と。" },
  examples:[
    {jp:"東京公演を皮切りに全国ツアーが始まった。", pron:"토오쿄오 코오엔오 카와키리니 젠코쿠 츠아아가 하지맛타", ko:"도쿄 공연을 시작으로 전국 투어가 시작됐다.", use:"✅ 기사", highlight:["を皮切りに"]},
    {jp:"第一弾を皮切りに次々と発表された。", pron:"다이이치단오 카와키리니 츠기츠기토 핫표오사레타", ko:"1탄을 시작으로 잇달아 발표됐다.", use:"✅ 전개", highlight:["を皮切りに"]},
    {jp:"この事件を皮切りに問題が表面化した。", pron:"코노 지켄오 카와키리니 몬다이가 효오멘카시타", ko:"이 사건을 시작으로 문제가 표면화했다.", use:"✅ 논설", highlight:["を皮切りに"]}
  ]
},
{
  cat:"logic", tag:"논리/전개", title:"～を端緒に (…을 단서/실마리로)",
  desc:"문제/수사가 전개되는 출발점(문어)",
  rule:"名詞 + <span class='hl'>を端緒に</span>",
  warn:"‘端緒(たんしょ)’ = 시작 실마리. 독해에 강함.",
  extra:{ core:"<span class='x-badge'>실마리</span> “~을 단서로”", situation:"수사/논쟁 확대", breakdown:"発言を端緒に + 議論", caution:"문어", variation:"疑惑を端緒に捜査が進む。" },
  examples:[
    {jp:"一言を端緒に議論が広がった。", pron:"히토코토오 탄쇼니 기론가 히로갓타", ko:"한마디를 단서로 논의가 퍼졌다.", use:"✅ 전개", highlight:["を端緒に"]},
    {jp:"不正疑惑を端緒に調査が始まった。", pron:"후세이 기와쿠오 탄쇼니 초오사가 하지맛타", ko:"부정 의혹을 단서로 조사가 시작됐다.", use:"✅ 기사", highlight:["を端緒に"]},
    {jp:"小さなミスを端緒に問題が表面化した。", pron:"치이사나 미스오 탄쇼니 몬다이가 효오멘카시타", ko:"작은 실수를 단서로 문제가 표면화했다.", use:"✅ 논설", highlight:["を端緒に"]}
  ]
},

/* =======================
   contrast: 대조/양보
======================= */
{
  cat:"contrast", tag:"대조/양보", title:"～にひきかえ (…에 비해)",
  desc:"A와 B를 대비(문어)",
  rule:"名詞/普通形 + <span class='hl'>にひきかえ</span>",
  warn:"논설에서 비교 구조로 빈출.",
  extra:{ core:"<span class='x-badge'>비교</span> “~에 비해”", situation:"대조 비교", breakdown:"兄にひきかえ + 弟は", caution:"문어", variation:"昔にひきかえ今は…" },
  examples:[
    {jp:"兄にひきかえ、弟は内向的だ。", pron:"아니니 히키카에 오토오토와 나이코오테키다", ko:"형에 비해 동생은 내성적이다.", use:"✅ 비교", highlight:["にひきかえ"]},
    {jp:"昔にひきかえ、今は便利になった。", pron:"무카시니 히키카에 이마와 벤리니 낫타", ko:"옛날에 비해 지금은 편리해졌다.", use:"✅ 설명", highlight:["にひきかえ"]},
    {jp:"予想にひきかえ、結果は悪かった。", pron:"요소오니 히키카에 켓카와 와루캇타", ko:"예상에 비해 결과는 나빴다.", use:"✅ 평가", highlight:["にひきかえ"]}
  ]
},
{
  cat:"contrast", tag:"대조/양보", title:"～といえなくもない (…라고 할 수도 있다)",
  desc:"완전 단정은 피하고 완곡하게 인정",
  rule:"普通形 + <span class='hl'>といえなくもない</span>",
  warn:"‘완곡한 평가’ 표현.",
  extra:{ core:"<span class='x-badge'>완곡</span> “~라고도 할 수”", situation:"평가/판단 완화", breakdown:"成功だ + といえなくもない", caution:"강한 단정 피함", variation:"正しいといえなくもない。" },
  examples:[
    {jp:"成功といえなくもないが、課題は残る。", pron:"세이코오 토이에나쿠모나이가 카다이와 노코루", ko:"성공이라 할 수도 있지만 과제는 남는다.", use:"✅ 논설", highlight:["といえなくもない"]},
    {jp:"合理的といえなくもない。", pron:"고오리테키 토이에나쿠모나이", ko:"합리적이라고도 할 수 있다.", use:"✅ 평가", highlight:["といえなくもない"]},
    {jp:"必要といえなくもないが急ぎではない。", pron:"히츠요오 토이에나쿠모나이가 이소기데와 나이", ko:"필요하다고 할 수도 있지만 급한 건 아니다.", use:"✅ 절제", highlight:["といえなくもない"]}
  ]
},
{
  cat:"contrast", tag:"대조/양보", title:"～なりとも (…이라도/…만이라도)",
  desc:"최소한의 양보(문어)",
  rule:"名詞 + <span class='hl'>なりとも</span>",
  warn:"‘せめて’의 문어 느낌.",
  extra:{ core:"<span class='x-badge'>최소</span> “~만이라도”", situation:"최소 요청", breakdown:"一言なりとも + 言う", caution:"문어", variation:"水なりともください。" },
  examples:[
    {jp:"水なりともください。", pron:"미즈 나리토모 쿠다사이", ko:"물이라도 주세요.", use:"✅ 최소 요청", highlight:["なりとも"]},
    {jp:"一言なりとも謝るべきだ。", pron:"히토코토 나리토모 아야마루베키다", ko:"한마디라도 사과해야 한다.", use:"✅ 주장", highlight:["なりとも"]},
    {jp:"助言なりともあればありがたい。", pron:"죠겐 나리토모 아레바 아리가타이", ko:"조언이라도 있으면 고맙겠다.", use:"✅ 문어", highlight:["なりとも"]}
  ]
},

/* =======================
   reason: 원인/결과
======================= */
{
  cat:"reason", tag:"원인/결과", title:"～と相まって (…와 맞물려)",
  desc:"요인들이 결합해 결과가 확대",
  rule:"名詞 + <span class='hl'>と相まって</span>",
  warn:"분석/기사에서 ‘복합 요인’ 전개로 빈출.",
  extra:{ core:"<span class='x-badge'>복합</span> “~와 맞물려”", situation:"시너지/결합", breakdown:"円安 + と相まって + 輸出増", caution:"‘とともに’보다 결합 강함", variation:"人気と相まって売上が伸びる。" },
  examples:[
    {jp:"円安と相まって、輸出が伸びた。", pron:"엔야스 토아이맛테 유슈츠가 노비타", ko:"엔저와 맞물려 수출이 늘었다.", use:"✅ 경제", highlight:["と相まって"]},
    {jp:"努力と才能が相まって成功した。", pron:"도료쿠토 사이노오가 아이맛테 세이코오시타", ko:"노력과 재능이 맞물려 성공했다.", use:"✅ 평가", highlight:["相まって"]},
    {jp:"好立地と相まって人気が高い。", pron:"코오릿치 토아이맛테 닌키가 타카이", ko:"좋은 입지와 맞물려 인기가 높다.", use:"✅ 설명", highlight:["と相まって"]}
  ]
},
{
  cat:"reason", tag:"원인/결과", title:"～いかんで / ～いかんによって (…에 따라 좌우)",
  desc:"결정 요인에 따라 결과가 달라짐(문어)",
  rule:"名詞 + <span class='hl'>いかんで</span> / <span class='hl'>いかんによって</span>",
  warn:"공식 문서에서 ‘～いかん’ 빈출.",
  extra:{ core:"<span class='x-badge'>좌우</span> “~여하에 달려”", situation:"조건이 결과 결정", breakdown:"対応いかんで + 変わる", caution:"격식", variation:"努力いかんで成功は決まる。" },
  examples:[
    {jp:"対応いかんで結果が大きく変わる。", pron:"타이오오 이칸데 켓카가 오오키쿠 카와루", ko:"대응 여하에 결과가 크게 달라진다.", use:"✅ 보고서", highlight:["いかんで"]},
    {jp:"本人の努力いかんによって決まる。", pron:"혼닌노 도료쿠 이칸니요옷테 키마루", ko:"본인의 노력 여하에 달려 있다.", use:"✅ 논설", highlight:["いかんによって"]},
    {jp:"天候いかんでは中止となる。", pron:"텐코오 이칸데와 츄우시토 나루", ko:"날씨 여하에 따라 중지된다.", use:"✅ 공지", highlight:["いかんでは"]}
  ]
},

/* =======================
   time: 시간/전환
======================= */
{
  cat:"time", tag:"시간/전환", title:"～や否や (…하자마자 곧)",
  desc:"즉시/동시 발생(문어)",
  rule:"動詞辞書形 + <span class='hl'>や否や</span>",
  warn:"서술/소설/기사에서 속도감 표현.",
  extra:{ core:"<span class='x-badge'>즉시</span> “~하자마자”", situation:"바로 행동", breakdown:"見る + や否や + 走る", caution:"회화 X", variation:"ベルが鳴るや否や飛び出した。" },
  examples:[
    {jp:"ベルが鳴るや否や、皆が走り出した。", pron:"베루가 나루야이나야 미나가 하시리다시타", ko:"벨이 울리자마자 모두 달려 나갔다.", use:"✅ 묘사", highlight:["や否や"]},
    {jp:"家に着くや否や、寝てしまった。", pron:"이에니 츠쿠야이나야 네테시맛타", ko:"집에 도착하자마자 잠들었다.", use:"✅ 즉시", highlight:["や否や"]},
    {jp:"彼は聞くや否や、顔色を変えた。", pron:"카레와 키쿠야이나야 카오이로오 카에타", ko:"그는 듣자마자 표정을 바꿨다.", use:"✅ 반응", highlight:["や否や"]}
  ]
},
{
  cat:"time", tag:"시간/전환", title:"～かと思いきや (…인 줄 알았더니)",
  desc:"예상 반전 전개",
  rule:"普通形 + <span class='hl'>かと思いきや</span>",
  warn:"독해에서 ‘반전’ 단서로 자주.",
  extra:{ core:"<span class='x-badge'>반전</span> “~인 줄 알았더니”", situation:"예상과 다른 결과", breakdown:"終わった + かと思いきや + 続く", caution:"문어", variation:"簡単かと思いきや難しい。" },
  examples:[
    {jp:"終わったかと思いきや、まだ続きがあった。", pron:"오왓타 카토오모이키야 마다 츠즈키가 앗타", ko:"끝난 줄 알았더니 아직 이어졌다.", use:"✅ 반전", highlight:["かと思いきや"]},
    {jp:"簡単かと思いきや、意外と難しい。", pron:"칸탄 카토오모이키야 이가이토 무즈카시이", ko:"쉬운 줄 알았더니 의외로 어렵다.", use:"✅ 평가", highlight:["かと思いきや"]},
    {jp:"勝ったかと思いきや、最後に逆転された。", pron:"캇타 카토오모이키야 사이고니 갸쿠텐사레타", ko:"이긴 줄 알았더니 마지막에 역전당했다.", use:"✅ 전개", highlight:["かと思いきや"]}
  ]
},

/* =======================
   pattern: 관용 패턴
======================= */
{
  cat:"pattern", tag:"관용 패턴", title:"～ずにはおかない (반드시 …하게 만든다)",
  desc:"상황이 사람을 어떤 행동/감정으로 유발",
  rule:"動詞ない形 + <span class='hl'>ずにはおかない</span>",
  warn:"‘～させずにはおかない’로 더 자주.",
  extra:{ core:"<span class='x-badge'>유발</span> “~하지 않을 수 없게 하다”", situation:"감동/행동 유발", breakdown:"人を感動させずにはおかない", caution:"문어", variation:"涙を誘わずにはおかない。" },
  examples:[
    {jp:"その映画は観客を感動させずにはおかない。", pron:"소노 에이가와 칸캬쿠오 칸도오사세즈니와오카나이", ko:"그 영화는 관객을 반드시 감동시킨다.", use:"✅ 평론", highlight:["ずにはおかない"]},
    {jp:"彼の言葉は人を奮い立たせずにはおかない。", pron:"카레노 코토바와 히토오 후루이타타세즈니와오카나이", ko:"그의 말은 사람을 분발하게 만든다.", use:"✅ 평가", highlight:["ずにはおかない"]},
    {jp:"その光景は涙を誘わずにはおかない。", pron:"소노 코오케에와 나미다오 사소와즈니와오카나이", ko:"그 광경은 눈물을 자아내지 않을 수 없다.", use:"✅ 묘사", highlight:["ずにはおかない"]}
  ]
},
{
  cat:"pattern", tag:"관용 패턴", title:"～てやまない (간절히 …하다)",
  desc:"기원/바람을 강하게 표현(문어)",
  rule:"動詞て形 + <span class='hl'>やまない</span>",
  warn:"‘祈ってやまない/願ってやまない’ 빈출.",
  extra:{ core:"<span class='x-badge'>기원</span> “~하기를 간절히 바란다”", situation:"성명/인사", breakdown:"回復を願ってやまない", caution:"회화 X", variation:"成功を祈ってやまない。" },
  examples:[
    {jp:"皆様のご健康を祈ってやみません。", pron:"미나사마노 고켄코오오 이놋테 야미마센", ko:"여러분의 건강을 진심으로 기원합니다.", use:"✅ 공식", highlight:["てやみません"]},
    {jp:"一日も早い復旧を願ってやまない。", pron:"이치니치모 하야이 훗큐우오 네갓테 야마나이", ko:"하루빨리 복구되길 간절히 바란다.", use:"✅ 성명", highlight:["てやまない"]},
    {jp:"成功を信じてやまない。", pron:"세이코오오 신지테 야마나이", ko:"성공을 굳게 믿는다.", use:"✅ 문어", highlight:["てやまない"]}
  ]
},
{
  cat:"pattern", tag:"관용 패턴", title:"～ずして (…하지 않고서)",
  desc:"…하지 않고서는/…없이(문어)",
  rule:"動詞ない形 + <span class='hl'>ずして</span>",
  warn:"‘～ずして～ない’ 형태로 자주.",
  extra:{ core:"<span class='x-badge'>부정</span> “~하지 않고서는”", situation:"불가능 강조", breakdown:"努力せずして成功できない", caution:"문어", variation:"学ばずして知ることなし。" },
  examples:[
    {jp:"努力せずして成功はない。", pron:"도료쿠세즈시테 세이코오와 나이", ko:"노력 없이는 성공이 없다.", use:"✅ 격문", highlight:["ずして"]},
    {jp:"確認せずして結論は出せない。", pron:"카쿠닌세즈시테 케츠론와 다시에나이", ko:"확인 없이 결론을 낼 수 없다.", use:"✅ 논설", highlight:["ずして"]},
    {jp:"準備せずして臨むべからず。", pron:"준비세즈시테 노조무베카라즈", ko:"준비 없이 임해서는 안 된다.", use:"✅ 문어", highlight:["ずして"]}
  ]
},
{
  cat:"pattern", tag:"관용 패턴", title:"～をも辞さない (…도 마다하지 않다)",
  desc:"목표 위해 희생도 각오(문어)",
  rule:"名詞 + <span class='hl'>をも辞さない</span>",
  warn:"강한 결의/각오 표현(기사/논설).",
  extra:{ core:"<span class='x-badge'>각오</span> “~도 마다않다”", situation:"비난/위험 감수", breakdown:"批判をも辞さない", caution:"문어", variation:"危険をも辞さず。" },
  examples:[
    {jp:"改革のためなら批判をも辞さない。", pron:"카이카쿠노 타메나라 히한오모 지사나이", ko:"개혁을 위해 비판도 마다하지 않는다.", use:"✅ 결의", highlight:["をも辞さない"]},
    {jp:"真実のためには犠牲をも辞さない。", pron:"신지츠노 타메니와 기세에오모 지사나이", ko:"진실을 위해 희생도 마다하지 않는다.", use:"✅ 문어", highlight:["をも辞さない"]},
    {jp:"彼は危険をも辞さず現場に入った。", pron:"카레와 키켄오모 지사즈 겐바니 하잇타", ko:"그는 위험도 마다하지 않고 현장에 들어갔다.", use:"✅ 기사", highlight:["をも辞さず"]}
  ]
},
{
  cat:"pattern", tag:"관용 패턴", title:"～を問わず (…을 불문하고)",
  desc:"구분 없이(문어)",
  rule:"名詞 + <span class='hl'>を問わず</span>",
  warn:"모집/규정에 매우 자주.",
  extra:{ core:"<span class='x-badge'>불문</span> “~에 상관없이”", situation:"모집/약관", breakdown:"経験を問わず + 採用", caution:"문어", variation:"男女を問わず。" },
  examples:[
    {jp:"年齢を問わず応募できます。", pron:"넨레이오 토와즈 오오보데키마스", ko:"연령 불문 지원 가능.", use:"✅ 모집", highlight:["を問わず"]},
    {jp:"経験を問わず採用します。", pron:"케이켄오 토와즈 사이요오시마스", ko:"경력 불문 채용.", use:"✅ 공고", highlight:["を問わず"]},
    {jp:"国籍を問わず参加可能。", pron:"코쿠세키오 토와즈 산카카노오", ko:"국적 불문 참가 가능.", use:"✅ 안내", highlight:["を問わず"]}
  ]
},
{
  cat:"pattern", tag:"관용 패턴", title:"～いかんにかかわらず (…와 상관없이)",
  desc:"사유/조건 불문(문어/규정)",
  rule:"名詞 + <span class='hl'>いかんにかかわらず</span>",
  warn:"약관/규정에 초빈출.",
  extra:{ core:"<span class='x-badge'>불문</span> “~와 상관없이”", situation:"예외 없이 적용", breakdown:"理由いかんにかかわらず", caution:"격식", variation:"理由いかんにかかわらず返金不可。" },
  examples:[
    {jp:"理由いかんにかかわらず、返金できません。", pron:"리유우 이칸니 카카와라즈 헨킨데키마센", ko:"사유 불문 환불 불가.", use:"✅ 규정", highlight:["いかんにかかわらず"]},
    {jp:"年齢いかんにかかわらず参加可能。", pron:"넨레이 이칸니 카카와라즈 산카카노오", ko:"연령 무관 참가 가능.", use:"✅ 모집", highlight:["いかんにかかわらず"]},
    {jp:"天候いかんにかかわらず実施する。", pron:"텐코오 이칸니 카카와라즈 지ッ시스루", ko:"날씨 상관없이 실시한다.", use:"✅ 공지", highlight:["いかんにかかわらず"]}
  ]
},

];

/* ==========================================================
  하이라이트/렌더 유틸
========================================================== */
function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#39;");
}
function applyHighlight(jp, highlightArr){
  let safe = escapeHtml(jp);
  const hs = (highlightArr || []).filter(Boolean).sort((a,b)=>b.length-a.length);
  hs.forEach(h => {
    const hh = escapeHtml(h);
    safe = safe.split(hh).join(`<span class="hl">${hh}</span>`);
  });
  return safe;
}
function renderCard(item){
  const exHtml = (item.examples || []).map(ex => {
    const jpHtml = applyHighlight(ex.jp, ex.highlight);
    return `
      <div class="ex-row">
        <div class="ex-left">
          <div class="ex-jp">${jpHtml}</div>
          <div class="ex-pron">${escapeHtml(ex.pron || "")}</div>
          <div class="ex-ko">${escapeHtml(ex.ko || "")}</div>
          ${ex.use ? `<div class="ex-use">${escapeHtml(ex.use)}</div>` : ``}
        </div>
        <button class="tts-btn" type="button" data-tts="${escapeHtml(ex.jp)}">발음 듣기</button>
      </div>
    `;
  }).join("");

  const extra = item.extra || {};
  const extraHtml = `
    <div class="g-extra">
      <div class="x-row"><div class="x-k">핵심</div><div class="x-v">${extra.core || ""}</div></div>
      <div class="x-row"><div class="x-k">상황</div><div class="x-v">${escapeHtml(extra.situation || "")}</div></div>
      <div class="x-row"><div class="x-k">분해</div><div class="x-v">${escapeHtml(extra.breakdown || "")}</div></div>
      <div class="x-row"><div class="x-k">주의</div><div class="x-v">${escapeHtml(extra.caution || "")}</div></div>
      <div class="x-row"><div class="x-k">변형</div><div class="x-v">${escapeHtml(extra.variation || "")}</div></div>
    </div>
  `;

  return `
    <div class="g-card" data-cat="${escapeHtml(item.cat)}">
      <div class="g-head">
        <h3 class="g-title">${escapeHtml(item.title)}</h3>
        <div class="g-tag">${escapeHtml(item.tag || "")}</div>
      </div>
      <p class="g-desc"><b>의미:</b> ${escapeHtml(item.desc || "")}</p>
      <div class="g-rule"><b>접속:</b> ${item.rule || ""}</div>
      <div class="g-warn"><b>포인트:</b> ${escapeHtml(item.warn || "")}</div>
      ${extraHtml}
      <div class="ex">${exHtml}</div>
    </div>
  `;
}

/* 초기 렌더 */
(function init(){
  const root = document.getElementById("grammarList");
  root.innerHTML = grammarData.map(renderCard).join("");
})();

/* 칩 필터 */
(function(){
  const chips = Array.from(document.querySelectorAll('.jlpt-chip[data-filter]'));
  function setOn(btn){
    chips.forEach(c => c.classList.remove('is-on'));
    btn.classList.add('is-on');
  }
  function applyFilter(key){
    const cards = Array.from(document.querySelectorAll('#grammarList .g-card'));
    cards.forEach(card => {
      const cat = (card.getAttribute('data-cat') || '').trim();
      card.style.display = (key === 'all' || cat === key) ? '' : 'none';
    });
  }
  chips.forEach(btn => {
    btn.addEventListener('click', () => {
      const key = btn.getAttribute('data-filter');
      setOn(btn);
      applyFilter(key);
    });
  });
})();

/* TTS */
(function () {
  function pickJapaneseVoice() {
    const voices = window.speechSynthesis?.getVoices?.() || [];
    return (
      voices.find(v => v.lang === "ja-JP") ||
      voices.find(v => (v.lang || "").toLowerCase().startsWith("ja")) ||
      null
    );
  }

  function speakJP(text) {
    if (!window.speechSynthesis) return;
    window.speechSynthesis.cancel();

    let t = (text || "").trim();
    if (!t) return;
    if (t.length === 1) t = t + "。";

    const u = new SpeechSynthesisUtterance(t);
    u.lang = "ja-JP";
    u.volume = 1;
    u.rate = 0.95;
    u.pitch = 1;

    const v = pickJapaneseVoice();
    if (v) u.voice = v;

    window.speechSynthesis.speak(u);
  }

  try { window.speechSynthesis.getVoices(); } catch(e) {}

  document.addEventListener("click", function (e) {
    const btn = e.target.closest(".tts-btn[data-tts]");
    if (!btn) return;
    speakJP(btn.getAttribute("data-tts"));
  });
})();
</script>
{% endblock %}
