{% extends "base.html" %}

{# âœ… SEO: ìƒí™©ë³„ íšŒí™” í—ˆë¸Œ #}
{% set page_title = "ìƒí™©ë³„ íšŒí™” | ì¼ë³¸ ì—¬í–‰ íšŒí™” ê³µë¶€ë°©" %}
{% set page_desc = "ê³µí•­Â·í˜¸í…”Â·êµí†µÂ·ì‹ë‹¹ ë“± ìƒí™©ì„ ì„ íƒí•˜ë©´ ì†Œë¶„ë¥˜ë³„ í•µì‹¬ ë¬¸ì¥ì„ ë°”ë¡œ ë³¼ ìˆ˜ ìˆì–´ìš”." %}
{% set page_robots = "index,follow" %}

{% block content %}


<style>
  .sit-wrap{
    max-width: 1080px;
    margin: 0 auto;
    padding: 22px 18px 48px;
  }

  .sit-head{
    display:flex;
    align-items:flex-end;
    justify-content:space-between;
    gap:16px;
    margin-bottom:18px;
  }
  .sit-title{
    font-size:34px;
    font-weight:900;
    letter-spacing:-0.5px;
    margin:0;
  }
  .sit-sub{
    margin:6px 0 0;
    color:#6b7280;
    font-size:14px;
    line-height:1.4;
  }

  .sit-grid{
    display:grid;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap:16px;
    margin-top:16px;
  }
  @media (max-width: 860px){
    .sit-grid{ grid-template-columns: 1fr; }
  }

  .cat-card{
    background:#ffffff;
    border:1px solid rgba(15, 23, 42, 0.08);
    border-radius:16px;
    padding:16px 16px 14px;
    box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
  }
  .cat-top{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:10px;
    margin-bottom:12px;
  }
  .cat-name{
    font-size:18px;
    font-weight:800;
    margin:0;
    letter-spacing:-0.3px;
  }
  .cat-meta{
    display:flex;
    align-items:center;
    gap:8px;
    color:#6b7280;
    font-size:12px;
    white-space:nowrap;
  }
  .pill{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:4px 10px;
    border-radius:999px;
    background:#f1f5ff;
    border:1px solid rgba(37, 99, 235, 0.18);
    color:#1d4ed8;
    font-weight:700;
    font-size:12px;
  }

  .chip-row{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
  }
  .chip{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;

    width:100%;
    padding:12px 14px;
    border-radius:14px;
    background:#f8fafc;
    border:1px solid rgba(15, 23, 42, 0.08);

    text-decoration:none;
    color:#0f172a;
    transition: transform .08s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
  }
  .chip:hover{
    transform: translateY(-1px);
    background:#ffffff;
    border-color: rgba(37, 99, 235, 0.22);
    box-shadow: 0 8px 18px rgba(37, 99, 235, 0.10);
  }
  .chip-left{
    display:flex;
    align-items:center;
    gap:10px;
    min-width:0;
  }
  .dot{
    width:10px;
    height:10px;
    border-radius:50%;
    background: rgba(37,99,235,.85);
    box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    flex: 0 0 auto;
  }
  .chip-title{
    font-weight:800;
    letter-spacing:-0.2px;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
  }
  .badge{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    min-width:34px;
    height:26px;
    padding:0 10px;
    border-radius:999px;
    background:#eef2ff;
    border:1px solid rgba(99,102,241,.25);
    color:#4338ca;
    font-weight:800;
    font-size:12px;
    flex: 0 0 auto;
  }

  .hint{
    margin-top:14px;
    color:#64748b;
    font-size:12px;
  }
  .sit-intro{
  margin: 6px 0 18px;
  padding: 18px 18px;
  background:#fff;
  border:1px solid rgba(15,23,42,0.08);
  border-radius:16px;
  box-shadow: 0 8px 28px rgba(15,23,42,0.06);
}
.sit-intro h2{
  margin:0 0 10px;
  font-size:18px;
  font-weight:900;
  letter-spacing:-.2px;
}
.sit-intro p{
  margin:6px 0;
  font-size:14px;
  color:#475569;
  line-height:1.65;
}
.sit-intro ul{
  margin:10px 0 6px;
  padding-left:18px;
  color:#334155;
  font-size:14px;
  line-height:1.65;
}
.sit-intro .mini{
  margin-top:10px;
  font-size:13px;
  color:#64748b;
}
/* =========================
   âœ… Mobile fix (PC ìœ ì§€)
   ========================= */
@media (max-width: 600px){

  /* ì „ì²´ íŒ¨ë”© ì•½ê°„ ì¤„ì´ê¸° */
  .sit-wrap{
    padding: 18px 14px 36px;
  }

  /* âœ… í—¤ë”: ì¢Œ(ì œëª©) + ìš°(ê²€ìƒ‰) â†’ ì„¸ë¡œë¡œ ìŒ“ê¸° */
  .sit-head{
    flex-direction: column;
    align-items: stretch;     /* âœ… ê°€ë¡œ ê½‰ ì°¨ê²Œ */
    gap: 12px;
    margin-bottom: 14px;
  }

  /* âœ… ì œëª©/ì„¤ëª… í…ìŠ¤íŠ¸ê°€ í•œ ê¸€ìì”© ì°¢ì–´ì§€ëŠ” í˜„ìƒ ë°©ì§€ */
  .sit-title,
  .sit-sub,
  .sit-intro h2,
  .sit-intro p,
  .sit-intro li{
    word-break: keep-all;
    overflow-wrap: anywhere;
  }

  .sit-title{
    font-size: 28px;          /* ëª¨ë°”ì¼ì—ì„œ ì¡°ê¸ˆë§Œ ì¤„ì´ê¸° */
    line-height: 1.15;
  }

  .sit-sub{
    font-size: 14px;
    line-height: 1.6;
  }

  /* âœ… ê²€ìƒ‰í¼: í•œ ì¤„ë¡œ ê½‰ ì°¨ê²Œ + ë²„íŠ¼/ì¸í’‹ ë¹„ìœ¨ ì¡°ì • */
  .sit-head form{
    width: 100%;
    margin: 0 !important;
  }
  .sit-head form input{
    width: 100%;
    min-width: 0;
  }
  .sit-head form button{
    white-space: nowrap;
  }

  /* âœ… ì¸íŠ¸ë¡œ ë°•ìŠ¤ íŒ¨ë”© ì‚´ì§ ì¤„ì´ê¸° */
  .sit-intro{
    padding: 16px 14px;
  }
  .sit-intro ul{
    padding-left: 18px;
  }

  /* âœ… ì¹´ë“œ ë‚´ë¶€ íƒ€ì´í‹€ ì¤„ë°”ê¿ˆ ìì—°ìŠ¤ëŸ½ê²Œ */
  .cat-name{
    word-break: keep-all;
    overflow-wrap: anywhere;
  }

  /* âœ… ì¹© ì œëª©ì´ ë„ˆë¬´ ê¸¸ë©´ â€¦ ëŒ€ì‹  2ì¤„ê¹Œì§€ í—ˆìš© (ì›í•˜ë©´) */
  .chip-title{
    white-space: normal;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;      /* 2ì¤„ê¹Œì§€ */
    -webkit-box-orient: vertical;
  }
}
@media (max-width: 600px){
  .sit-head form{ display:flex !important; gap:10px !important; }
}


</style>

<div class="sit-wrap">
  <div class="sit-head">
    <div>
      <h1 class="sit-title">ğŸ“ ì¼ë³¸ì–´ ìƒí™©ë³„ íšŒí™”</h1>
      <p class="sit-sub">ì´ í˜ì´ì§€ëŠ” <b>ì¼ìƒìƒí™œê³¼ ì—¬í–‰ ìƒí™©</b>ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¼ë³¸ì–´ í‘œí˜„ì„ ìƒí™©ë³„ë¡œ ì •ë¦¬í•œ í•™ìŠµ ìë£Œì…ë‹ˆë‹¤.
      </p>
      <p class="sit-sub">í‘œí˜„ì´ ì‚¬ìš©ë˜ëŠ” ë§¥ë½ì„ í•¨ê»˜ ìµí˜ìœ¼ë¡œì¨, ë‹¨ìˆœ ì•”ê¸°ê°€ ì•„ë‹Œ ì‹¤ì „ ì¤‘ì‹¬ í•™ìŠµì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.
      </p>
    </div>
  
    <form method="GET" action="{{ url_for('situations_search') }}"
          style="display:flex; gap:10px; margin:12px 0 18px;">
      <input type="text" name="q" value="{{ q or '' }}"
             placeholder="ì¼ë³¸ì–´ / ë°œìŒ / í•œêµ­ì–´ë¡œ ê²€ìƒ‰ (ì˜ˆ: ä»Š, ì´ë§ˆ, ì§€ê¸ˆ)"
             style="flex:1; height:44px; border-radius:14px; border:1px solid rgba(15,23,42,.10); padding:0 14px; outline:none;">
      <button type="submit"
              style="height:44px; padding:0 16px; border-radius:14px; border:none; background:#2563eb; color:#fff; font-weight:800; cursor:pointer;">
        ê²€ìƒ‰
      </button>
    </form>
  </div>
<section class="sit-intro">
    <h2>ìƒí™©ë³„ ì¼ë³¸ì–´ íšŒí™”ëŠ” ì´ë ‡ê²Œ ê³µë¶€í•˜ì„¸ìš”</h2>
    <p>
      ì¼ë³¸ ì—¬í–‰ì—ì„œ ìì£¼ ë§ˆì£¼ì¹˜ëŠ” ìƒí™©(ê³µí•­Â·í˜¸í…”Â·ì‹ë‹¹Â·ì‡¼í•‘Â·êµí†µ ë“±)ì„ ê¸°ì¤€ìœ¼ë¡œ
      í•„ìš”í•œ í‘œí˜„ì„ <b>ë¶„ë¥˜ë³„ë¡œ ì •ë¦¬</b>í•´ë‘ì—ˆìŠµë‹ˆë‹¤.
      ì•„ë˜ì—ì„œ ìƒí™©ì„ ì„ íƒí•˜ë©´ í•´ë‹¹ ìƒí™©ì—ì„œ ì‹¤ì œë¡œ ì“°ëŠ” ë¬¸ì¥, ë°œìŒ, ëœ»ì„ í•œ ë²ˆì— í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.
    </p>
    <ul>
      <li><b>ì¶”ì²œ í•™ìŠµë²• 1)</b> ì˜¤ëŠ˜ í•„ìš”í•œ ìƒí™© 1ê°œ ì„ íƒ â†’ ë¬¸ì¥ 10ê°œë§Œ ë¨¼ì € ìµíˆê¸°</li>
      <li><b>ì¶”ì²œ í•™ìŠµë²• 2)</b> ë°œìŒ(ì½ëŠ” ë²•)ê¹Œì§€ ê°™ì´ ë³´ê³  ì†Œë¦¬ ë‚´ì–´ ë”°ë¼ ì½ê¸°</li>
      <li><b>ì¶”ì²œ í•™ìŠµë²• 3)</b> ê²€ìƒ‰ì°½ìœ¼ë¡œ â€œì§€ê¸ˆ/ì˜¤ëŠ˜/ì–¼ë§ˆâ€ ê°™ì€ í‘œí˜„ì„ ë°˜ë³µ ê²€ìƒ‰í•´ì„œ ì•”ê¸°</li>
    </ul>
    <p class="mini">
      Tip: ìƒí™©ì„ ê³ ë¥¸ ë’¤ ë¬¸ì¥ì„ ì €ì¥í•´ë‘ë©´ <b>ë‚˜ë§Œì˜ í•™ìŠµë…¸íŠ¸</b>ì—ì„œ ë³µìŠµí•˜ê¸°ê°€ ë” ì‰¬ì›Œìš”.
    </p>
  </section>
  {% if situations and (situations|length) > 0 %}
    <div class="sit-grid">
      {# âœ… dictsortë¡œ í‚¤ ê¸°ì¤€ ì •ë ¬ (ì›í•˜ëŠ” ìˆœì„œê°€ ë”°ë¡œ ìˆìœ¼ë©´ app.pyì—ì„œ ì •ë ¬í•´ë„ ë¨) #}
      {% for cat_key, cat in (situations|dictsort) %}
        {% set subs = (cat.get("subs") or {}) %}
        <section class="cat-card">
          <div class="cat-top">
            <h2 class="cat-name">{{ (cat["title"] or "") | e }}</h2>
            <div class="cat-meta">
              <span>ì†Œë¶„ë¥˜</span>
              <span class="pill">{{ subs|length }}</span>
            </div>
          </div>

          <div class="chip-row">
          {% for sub_key, sub in (subs|dictsort) %}
            {% set items = (sub.get("items") or []) %}
            <a class="chip" href="{{ url_for('situation_detail', main_key=cat_key, sub_key=sub_key) }}">
              <div class="chip-left">
                <span class="dot"></span>
                <span class="chip-title">{{ (sub["title"] or "") | e }}</span>
              </div>
              <span class="badge">{{ items|length }}</span>
            </a>
          {% endfor %}
        </div>


          <div class="hint">â€» ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ì†Œë¶„ë¥˜ ë¬¸ì¥ì´ ì—´ë ¤ìš”.</div>
        </section>
      {% endfor %}
    </div>
  {% else %}
    <div style="margin-top:16px; padding:14px 16px; border:1px dashed #d9e2f5; border-radius:14px; color:#64748b; background:#fbfdff;">
      ì•„ì§ ìƒí™©ë³„ íšŒí™” ë¶„ë¥˜ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤. ê³§ ì—…ë°ì´íŠ¸í• ê²Œìš”!
    </div>
  {% endif %}
</div>

{% endblock %}
